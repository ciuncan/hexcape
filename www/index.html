<html><body oncontextmenu=return false;><script>
/* Generated by the Nim Compiler v0.16.1 */
/*   (c) 2017 Andreas Rumpf */

var framePtr = null;
var excHandler = 0;
var lastJSError = null;
if (typeof Int8Array === 'undefined') Int8Array = Array;
if (typeof Int16Array === 'undefined') Int16Array = Array;
if (typeof Int32Array === 'undefined') Int32Array = Array;
if (typeof Uint8Array === 'undefined') Uint8Array = Array;
if (typeof Uint16Array === 'undefined') Uint16Array = Array;
if (typeof Uint32Array === 'undefined') Uint32Array = Array;
if (typeof Float32Array === 'undefined') Float32Array = Array;
if (typeof Float64Array === 'undefined') Float64Array = Array;
var NTI3446 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI47028 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI57220 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56250 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56551 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56010 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI43021 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3454 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56004 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56043 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI56002 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56041 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI3458 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI124 = {size: 0,kind: 36,base: null,node: null,finalizer: null};
var NTI43023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3440 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI104 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI12609 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI3408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI138 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI140 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI3485 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI3424 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3438 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3442 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NNI3442 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3442.node = NNI3442;
var NNI3438 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3438.node = NNI3438;
NTI3485.base = NTI3424;
var NNI3424 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI3485, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI140, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI138, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI138, name: "trace", sons: null}]};
NTI3424.node = NNI3424;
var NNI3408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3408.node = NNI3408;
NTI3424.base = NTI3408;
NTI3438.base = NTI3424;
NTI3442.base = NTI3438;
var NNI12609 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI140, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI104, name: "Field1", sons: null}]};
NTI12609.node = NNI12609;
var NNI3440 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3440.node = NNI3440;
NTI3440.base = NTI3438;
var NNI43023 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43023.node = NNI43023;
var NNI3458 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3458.node = NNI3458;
NTI3458.base = NTI3424;
var NNI56002 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: [{kind: 1, offset: 0, typ: NTI56002, name: "tsEmpty", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56002, name: "tsCollapsed", len: 0, sons: null}, 
{kind: 1, offset: 2, typ: NTI56002, name: "tsRaised", len: 0, sons: null}]};
NTI56002.node = NNI56002;
NTI56041.base = NTI56002;
var NNI56004 = {kind: 2, offset: 0, typ: null, name: null, len: 2, sons: [{kind: 1, offset: 0, typ: NTI56004, name: "ttAllNeighbors", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56004, name: "ttLeftRight", len: 0, sons: null}]};
NTI56004.node = NNI56004;
NTI56043.base = NTI56004;
var NNI3454 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3454.node = NNI3454;
NTI3454.base = NTI3424;
var NNI43021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43021.node = NNI43021;
var NNI56010 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI104, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI104, name: "y", sons: null}]};
NTI56010.node = NNI56010;
NTI56551.base = NTI56002;
NTI56250.base = NTI56010;
NTI57220.base = NTI140;
NTI47028.base = NTI43021;
var NNI3446 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3446.node = NNI3446;
NTI3446.base = NTI3424;
function makeNimstrLit(c_13603) {

    var ln = c_13603.length;
    var result = new Array(ln + 1);
    var i = 0;
    for (; i < ln; ++i) {
      result[i] = c_13603.charCodeAt(i);
    }
    result[i] = 0; // terminating zero
    return result;
    }
function SetConstr() {

      var result = {};
      for (var i = 0; i < arguments.length; ++i) {
        var x = arguments[i];
        if (typeof(x) == "object") {
          for (var j = x[0]; j <= x[1]; ++j) {
            result[j] = true;
          }
        } else {
          result[x] = true;
        }
      }
      return result;
    }
function nimCopy(dest_18818, src_18819, ti_18820) {

var result_19229 = null;
switch (ti_18820.kind) {
case 21: case 22: case 23: case 5: if (!(isFatPointer_18801(ti_18820))) {
result_19229 = src_18819;
}
else {
result_19229 = [src_18819[0], src_18819[1]];}


break;
case 19:       if (dest_18818 === null || dest_18818 === undefined) {
        dest_18818 = {};
      }
      else {
        for (var key in dest_18818) { delete dest_18818[key]; }
      }
      for (var key in src_18819) { dest_18818[key] = src_18819[key]; }
      result_19229 = dest_18818;
    
break;
case 18: case 17: if (!((ti_18820.base == null))) {
result_19229 = nimCopy(dest_18818, src_18819, ti_18820.base);
}
else {
if ((ti_18820.kind == 17)) {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {m_type: ti_18820} : dest_18818;}
else {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {} : dest_18818;}
}
nimCopyAux(result_19229, src_18819, ti_18820.node);

break;
case 24: case 4: case 27: case 16:       if (src_18819 === null) {
        result_19229 = null;
      }
      else {
        if (dest_18818 === null || dest_18818 === undefined) {
          dest_18818 = new Array(src_18819.length);
        }
        else {
          dest_18818.length = src_18819.length;
        }
        result_19229 = dest_18818;
        for (var i = 0; i < src_18819.length; ++i) {
          result_19229[i] = nimCopy(result_19229[i], src_18819[i], ti_18820.base);
        }
      }
    
break;
case 28:       if (src_18819 !== null) {
        result_19229 = src_18819.slice(0);
      }
    
break;
default: 
result_19229 = src_18819;
break;
}
return result_19229;
}
function eqStrings(a_16203, b_16204) {

    if (a_16203 == b_16204) return true;
    if ((!a_16203) || (!b_16204)) return false;
    var alen = a_16203.length;
    if (alen != b_16204.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_16203[i] != b_16204[i]) return false;
    return true;
  }
function arrayConstr(len_19403, value_19404, typ_19405) {

      var result = new Array(len_19403);
      for (var i = 0; i < len_19403; ++i) result[i] = nimCopy(null, value_19404, typ_19405);
      return result;
    }
function cstrToNimstr(c_13803) {

  var ln = c_13803.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_13803.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else if((ch > 127) && (ch < 2048)) {
      result[r] = (ch >> 6) | 192;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    else {
      result[r] = (ch >> 12) | 224;
      ++r;
      result[r] = ((ch >> 6) & 63) | 128;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  result[r] = 0; // terminating zero
  return result;
  }
function toJSStr(s_14003) {

    var len = s_14003.length-1;
    var asciiPart = new Array(len);
    var fcc = String.fromCharCode;
    var nonAsciiPart = null;
    var nonAsciiOffset = 0;
    for (var i = 0; i < len; ++i) {
      if (nonAsciiPart !== null) {
        var offset = (i - nonAsciiOffset) * 2;
        var code = s_14003[i].toString(16);
        if (code.length == 1) {
          code = "0"+code;
        }
        nonAsciiPart[offset] = "%";
        nonAsciiPart[offset + 1] = code;
      }
      else if (s_14003[i] < 128)
        asciiPart[i] = fcc(s_14003[i]);
      else {
        asciiPart.length = i;
        nonAsciiOffset = i;
        nonAsciiPart = new Array((len - i) * 2);
        --i;
      }
    }
    asciiPart = asciiPart.join("");
    return (nonAsciiPart === null) ?
        asciiPart : asciiPart + decodeURIComponent(nonAsciiPart.join(""));
  }
function raiseException(e_13006, ename_13007) {

e_13006.name = ename_13007;
if ((excHandler == 0)) {
unhandledException(e_13006);
}

e_13006.trace = nimCopy(null, rawWriteStackTrace_12828(), NTI138);
throw e_13006;}
function mulInt(a_16803, b_16804) {

      var result = a_16803 * b_16804;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function chckRange(i_19415, a_19416, b_19417) {

var Tmp1;
var result_19418 = 0;
BeforeRet: do {
if (!(a_19416 <= i_19415)) Tmp1 = false; else {Tmp1 = (i_19415 <= b_19417); }if (Tmp1) {
result_19418 = i_19415;
break BeforeRet;
}
else {
raiseRangeError();
}

} while (false); 
return result_19418;
}
function chckIndx(i_19409, a_19410, b_19411) {

var Tmp1;
var result_19412 = 0;
BeforeRet: do {
if (!(a_19410 <= i_19409)) Tmp1 = false; else {Tmp1 = (i_19409 <= b_19411); }if (Tmp1) {
result_19412 = i_19409;
break BeforeRet;
}
else {
raiseIndexError();
}

} while (false); 
return result_19412;
}
function addInt(a_16460, b_16461) {

      var result = a_16460 + b_16461;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function modInt(a_17203, b_17204) {

      if (b_17204 == 0) raiseDivByZero();
      if (b_17204 == -1 && a_17203 == 2147483647) raiseOverflow();
      return Math.floor(a_17203 % b_17204);
    }
function divInt(a_17003, b_17004) {

      if (b_17004 == 0) raiseDivByZero();
      if (b_17004 == -1 && a_17003 == 2147483647) raiseOverflow();
      return Math.floor(a_17003 / b_17004);
    }
var tileStates2Opposite_56548 = nimCopy(null, [0, 2, 1], NTI56551);
var directions2CoordsOffsets_56247 = nimCopy(null, [{x: 0, y: 1}, {x: -1, y: 1}, {x: -1, y: 0}, {x: 0, y: -1}, {x: 1, y: -1}, {x: 1, y: 0}], NTI56250);
var tileStates2Colors_57217 = nimCopy(null, ["rgb(0,0,0)", "rgb(200,200,255)", "rgb(80,120,240)"], NTI57220);
function subInt(a_16603, b_16604) {

      var result = a_16603 - b_16604;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
var nimvm_5887 = false;
var nim_program_result = 0;
var globalRaiseHook_10614 = [null];
var localRaiseHook_10619 = [null];
var outOfMemHook_10622 = [null];
function isFatPointer_18801(ti_18803) {

var result_18804 = false;
BeforeRet: do {
result_18804 = !((SetConstr(17, 16, 4, 18, 27, 19, 23, 22, 21)[ti_18803.base.kind] != undefined));
break BeforeRet;
} while (false); 
return result_18804;
}
function nimCopyAux(dest_18823, src_18824, n_18826) {

switch (n_18826.kind) {
case 0: 
break;
case 1:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
    
break;
case 2: L1: do {
var i_19215 = 0;
var colontmp__19217 = 0;
colontmp__19217 = (n_18826.len - 1);
var res_19220 = 0;
L2: do {
L3: while (true) {
if (!(res_19220 <= colontmp__19217)) break L3;
i_19215 = res_19220;
nimCopyAux(dest_18823, src_18824, n_18826.sons[i_19215]);
res_19220 += 1;
}
} while(false);
} while(false);

break;
case 3:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
      for (var i = 0; i < n_18826.sons.length; ++i) {
        nimCopyAux(dest_18823, src_18824, n_18826.sons[i][1]);
      }
    
break;
}
}
function add_10638(x_10641, x_10641_Idx, y_10642) {

        var len = x_10641[0].length-1;
        for (var i = 0; i < y_10642.length; ++i) {
          x_10641[0][len] = y_10642.charCodeAt(i);
          ++len;
        }
        x_10641[0][len] = 0
      }
function auxWriteStackTrace_12604(f_12606) {

var Tmp3;
var result_12607 = [null];
var it_12615 = f_12606;
var i_12616 = 0;
var total_12617 = 0;
var tempFrames_12621 = arrayConstr(64, {Field0: null, Field1: 0}, NTI12609);
L1: do {
L2: while (true) {
if (!!((it_12615 == null))) Tmp3 = false; else {Tmp3 = (i_12616 <= 63); }if (!Tmp3) break L2;
tempFrames_12621[i_12616].Field0 = it_12615.procname;
tempFrames_12621[i_12616].Field1 = it_12615.line;
i_12616 += 1;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
L4: do {
L5: while (true) {
if (!!((it_12615 == null))) break L5;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
result_12607[0] = nimCopy(null, makeNimstrLit(""), NTI138);
if (!((total_12617 == i_12616))) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("(")); } else { result_12607[0] = makeNimstrLit("(");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr(((total_12617 - i_12616))+"")); } else { result_12607[0] = cstrToNimstr(((total_12617 - i_12616))+"");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(" calls omitted) ...\x0A")); } else { result_12607[0] = makeNimstrLit(" calls omitted) ...\x0A");};
}

L6: do {
var j_12815 = 0;
var colontmp__12821 = 0;
colontmp__12821 = (i_12616 - 1);
var res_12824 = colontmp__12821;
L7: do {
L8: while (true) {
if (!(0 <= res_12824)) break L8;
j_12815 = res_12824;
add_10638(result_12607, 0, tempFrames_12621[j_12815].Field0);
if ((0 < tempFrames_12621[j_12815].Field1)) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(", line: ")); } else { result_12607[0] = makeNimstrLit(", line: ");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr((tempFrames_12621[j_12815].Field1)+"")); } else { result_12607[0] = cstrToNimstr((tempFrames_12621[j_12815].Field1)+"");};
}

if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("\x0A")); } else { result_12607[0] = makeNimstrLit("\x0A");};
res_12824 -= 1;
}
} while(false);
} while(false);
return result_12607[0];
}
function rawWriteStackTrace_12828() {

var result_12830 = null;
if (!((framePtr == null))) {
result_12830 = nimCopy(null, (makeNimstrLit("Traceback (most recent call last)\x0A").slice(0,-1)).concat(auxWriteStackTrace_12604(framePtr)), NTI138);
}
else {
result_12830 = nimCopy(null, makeNimstrLit("No stack traceback available\x0A"), NTI138);
}

return result_12830;
}
function unhandledException(e_12854) {

var Tmp1;
var buf_12855 = /**/[makeNimstrLit("")];
if (!!(eqStrings(e_12854.message, null))) Tmp1 = false; else {Tmp1 = !((e_12854.message[0] == 0)); }if (Tmp1) {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception: ")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception: ");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(e_12854.message); } else { buf_12855[0] = e_12854.message;};
}
else {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception");};
}

if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit(" [")); } else { buf_12855[0] = makeNimstrLit(" [");};
add_10638(buf_12855, 0, e_12854.name);
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("]\x0A")); } else { buf_12855[0] = makeNimstrLit("]\x0A");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(rawWriteStackTrace_12828()); } else { buf_12855[0] = rawWriteStackTrace_12828();};
var cbuf_13001 = toJSStr(buf_12855[0]);
framePtr = null;
  if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_13001);
  }
  else {
    throw cbuf_13001;
  }
  }
function raiseOverflow() {

var e_13441 = null;
e_13441 = {m_type: NTI3442, parent: null, name: null, message: null, trace: null};
e_13441.message = nimCopy(null, makeNimstrLit("over- or underflow"), NTI138);
e_13441.parent = null;
raiseException(e_13441, "OverflowError");
}
function raiseDivByZero() {

var e_13459 = null;
e_13459 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
e_13459.message = nimCopy(null, makeNimstrLit("division by zero"), NTI138);
e_13459.parent = null;
raiseException(e_13459, "DivByZeroError");
}
var IDMATRIX_43056 = matrix2d_43040(1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, 0.0, 0.0);
var ORIGO_43057 = point2d_43052(0.0, 0.0);
var XAXIS_43058 = vector2d_43048(1.0000000000000000e+00, 0.0);
var YAXIS_43059 = vector2d_43048(0.0, 1.0000000000000000e+00);
var state_49605 = /**/[{a0: 1773455756, a1: 4275166512}];
function getTime_52042() {

var result_52413 = null;
var F={procname:"times.getTime",prev:framePtr,filename:"lib/pure/times.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 586;
result_52413 = new Date();
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_52413;
}
var startMilsecs_52448 = /**/[getTime_52042()];
function getContext2D_46713(c_46715) {

var result_46716 = null;
var F={procname:"html5_canvas.getContext2D",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/html5_canvas.nim",line:0};
framePtr = F;
F.line = 24;
result_46716=c_46715.getContext('2d');framePtr = F.prev;
return result_46716;
}
function vector2d_43048(x_43050, y_43051) {

var result_43317 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.vector2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 337;
result_43317.x = x_43050;
F.line = 338;
result_43317.y = y_43051;
framePtr = F.prev;
return result_43317;
}
function slash__20607(x_20609, y_20610) {

var result_20611 = 0.0;
var F={procname:"system./",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 3268;
result_20611 = (x_20609 / y_20610);
framePtr = F.prev;
return result_20611;
}
function newSeq_56072(len_56076) {

var result_56078 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56078 = new Array(len_56076); for (var i=0;i<len_56076;++i) {result_56078[i]=0;}framePtr = F.prev;
return result_56078;
}
function raiseRangeError() {

var e_13477 = null;
e_13477 = {m_type: NTI3458, parent: null, name: null, message: null, trace: null};
e_13477.message = nimCopy(null, makeNimstrLit("value out of range"), NTI138);
e_13477.parent = null;
raiseException(e_13477, "RangeError");
}
function newSeq_56111(len_56115) {

var result_56117 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56117 = new Array(len_56115); for (var i=0;i<len_56115;++i) {result_56117[i]=0;}framePtr = F.prev;
return result_56117;
}
function newHexGrid_56038(width_56040, tileStates_56042, tileTypes_56044) {

var result_56045 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56045 = {width: 0, tileStates: null, tileTypes: null};
F.line = 75;
result_56045.width = width_56040;
F.line = 76;
result_56045.tileStates = nimCopy(null, tileStates_56042, NTI56041);
F.line = 77;
result_56045.tileTypes = nimCopy(null, tileTypes_56044, NTI56043);
framePtr = F.prev;
return result_56045;
}
function newHexGrid_56054(width_56056) {

var result_56057 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 80;
F.line = 81;
var nTiles_56058 = mulInt(width_56056, width_56056);
F.line = 82;
var states_56097 = newSeq_56072(chckRange(nTiles_56058, 0, 2147483647));
F.line = 83;
var types_56136 = newSeq_56111(chckRange(nTiles_56058, 0, 2147483647));
result_56057 = newHexGrid_56038(width_56056, states_56097, types_56136);
framePtr = F.prev;
return result_56057;
}
function nTiles_56142(grid_56144) {

var result_56145 = 0;
var F={procname:"logic.nTiles",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 90;
result_56145 = mulInt(grid_56144.width, grid_56144.width);
framePtr = F.prev;
return result_56145;
}
function raiseIndexError() {

var e_13495 = null;
e_13495 = {m_type: NTI3454, parent: null, name: null, message: null, trace: null};
e_13495.message = nimCopy(null, makeNimstrLit("index out of bounds"), NTI138);
e_13495.parent = null;
raiseException(e_13495, "IndexError");
}
function rotl_49802(x_49804, k_49805) {

var result_49806 = 0;
var F={procname:"random.rotl",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 44;
result_49806 = ((x_49804 << k_49805) | ((x_49804 >>> 0) >>> ((64 - k_49805) >>> 0)));
framePtr = F.prev;
return result_49806;
}
function next_49846(s_49849) {

var result_49850 = 0;
var F={procname:"random.next",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 47;
var s0_49851 = s_49849.a0;
F.line = 48;
var s1_49852 = s_49849.a1;
F.line = 49;
result_49850 = ((s0_49851 + s1_49852) >>> 0);
F.line = 50;
s1_49852 = (s1_49852 ^ s0_49851);
F.line = 51;
s_49849.a0 = ((rotl_49802(s0_49851, 55) ^ s1_49852) ^ (s1_49852 << 14));
F.line = 52;
s_49849.a1 = rotl_49802(s1_49852, 36);
framePtr = F.prev;
return result_49850;
}
function random_50282(max_50284) {

var result_50285 = 0;
var F={procname:"random.random",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
BeforeRet: do {
L1: do {
F.line = 79;
L2: while (true) {
if (!true) break L2;
F.line = 80;
var x_50287 = next_49846(state_49605[0]);
if ((x_50287 < ((4294967295 - (4294967295 % chckRange(max_50284, 0, 4294967295))) >>> 0))) {
F.line = 82;
result_50285 = ((x_50287 % max_50284)|0);
break BeforeRet;
}

}
} while(false);
} while (false); 
framePtr = F.prev;
return result_50285;
}
function randomize_56198(grid_56200) {

var F={procname:"logic.randomize",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 108;
var i_56201 = 0;
L2: do {
F.line = 96;
var i_56208 = 0;
F.line = 3714;
var colontmp__56210 = 0;
F.line = 96;
colontmp__56210 = nTiles_56142(grid_56200);
F.line = 3715;
var i_56212 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56212 < colontmp__56210)) break L4;
F.line = 3717;
i_56208 = i_56212;
F.line = 97;
i_56201 = i_56208;
F.line = 109;
grid_56200.tileStates[chckIndx(i_56201, 0, grid_56200.tileStates.length)-0] = chckRange(random_50282(3), 0, 2);
i_56212 = addInt(i_56212, 1);
}
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function newGame_57265(renderer_57267) {

var result_57268 = null;
var F={procname:"html5_game.newGame",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
result_57268 = {renderer: null, pressedMousePos: {x: 0.0, y: 0.0}, currentMousePos: {x: 0.0, y: 0.0}, inputs: {}, grid: null, topPos: {x: 0.0, y: 0.0}, hexRadius: 0.0, nMoves: 0, isWin: false};
F.line = 49;
result_57268.renderer = renderer_57267;
F.line = 50;
nimCopy(result_57268.topPos, vector2d_43048(slash__20607(1280, 2), 5.0000000000000000e+01), NTI43023);
F.line = 51;
result_57268.hexRadius = 3.0000000000000000e+01;
F.line = 52;
result_57268.grid = newHexGrid_56054(5);
randomize_56198(result_57268.grid);
framePtr = F.prev;
return result_57268;
}
var Tmp1;
var canvasId_57408 = /**/[makeNimstrLit("canvas")];
var old_57409 = /**/[document.getElementById(toJSStr(canvasId_57408[0]))];
if (!((old_57409[0] === null))) {
Tmp1 = old_57409[0];
}
else {
Tmp1 = document.createElement(toJSStr(canvasId_57408[0]));
}

var canvas_57418 = /**/[Tmp1];
var ctx_57419 = /**/[getContext2D_46713(canvas_57418[0])];
var game_57420 = /**/[newGame_57265(ctx_57419[0])];
function offsetLeft_57421(el_57423) {

var result_57424 = 0.0;
var F={procname:"html5_game.offsetLeft",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 174;
el_57423.offsetLeft;framePtr = F.prev;
return result_57424;
}
function offsetTop_57425(el_57427) {

var result_57428 = 0.0;
var F={procname:"html5_game.offsetTop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 175;
el_57427.offsetTop;framePtr = F.prev;
return result_57428;
}
function relative_57432(ev_57434) {

var result_57435 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.relative",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 183;
var x_57436 = ev_57434.x;
F.line = 184;
var y_57437 = ev_57434.y;
F.line = 185;
var ol_57438 = offsetLeft_57421(ev_57434.target);
F.line = 186;
var ot_57439 = offsetTop_57425(ev_57434.target);
F.line = 187;
result_57435.x = (x_57436 - ol_57438);
F.line = 188;
result_57435.y = (y_57437 - ot_57439);
framePtr = F.prev;
return result_57435;
}
function stopPropagation_57442(ev_57444) {

var F={procname:"html5_game.stopPropagation",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 190;
ev_57444.stopPropagation();framePtr = F.prev;
}
function colonanonymous__57445(ev_57447) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 193;
nimCopy(game_57420[0].pressedMousePos, relative_57432(ev_57447), NTI43021);
game_57420[0].inputs[3] = true;
if ((ev_57447.button == 2)) {
game_57420[0].inputs[2] = true;
}

stopPropagation_57442(ev_57447);
framePtr = F.prev;
}
canvas_57418[0].onmousedown = colonanonymous__57445;
function colonanonymous__57470(ev_57472) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
delete game_57420[0].inputs[3];
game_57420[0].inputs[4] = true;
if ((ev_57472.button == 2)) {
delete game_57420[0].inputs[2];
}

stopPropagation_57442(ev_57472);
framePtr = F.prev;
}
canvas_57418[0].onmouseup = colonanonymous__57470;
function colonanonymous__57506(ev_57508) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 207;
nimCopy(game_57420[0].currentMousePos, relative_57432(ev_57508), NTI43021);
framePtr = F.prev;
}
canvas_57418[0].onmousemove = colonanonymous__57506;
canvas_57418[0].width = 1280;
canvas_57418[0].height = 720;
if ((old_57409[0] === null)) {
document.body.appendChild(canvas_57418[0]);
}

function setElements_43114(t_43117, ax_43118, ay_43119, bx_43120, by_43121, tx_43122, ty_43123) {

var F={procname:"basic2d.setElements",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 137;
t_43117.ax = ax_43118;
F.line = 138;
t_43117.ay = ay_43119;
F.line = 139;
t_43117.bx = bx_43120;
F.line = 140;
t_43117.by = by_43121;
F.line = 141;
t_43117.tx = tx_43122;
F.line = 142;
t_43117.ty = ty_43123;
framePtr = F.prev;
}
function amp__43134(a_43136, b_43137) {

var result_43138 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43138[0], ((a_43136.ax * b_43137.ax) + (a_43136.ay * b_43137.bx)), ((a_43136.ax * b_43137.ay) + (a_43136.ay * b_43137.by)), ((a_43136.bx * b_43137.ax) + (a_43136.by * b_43137.bx)), ((a_43136.bx * b_43137.ay) + (a_43136.by * b_43137.by)), (((a_43136.tx * b_43137.ax) + (a_43136.ty * b_43137.bx)) + b_43137.tx), (((a_43136.tx * b_43137.ay) + (a_43136.ty * b_43137.by)) + b_43137.ty));
framePtr = F.prev;
return result_43138[0];
}
function matrix2d_43040(ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047) {

var result_43132 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.matrix2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43132[0], ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047);
framePtr = F.prev;
return result_43132[0];
}
function scale_43140(s_43142) {

var result_43143 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.scale",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43143[0], s_43142, 0.0, 0.0, s_43142, 0.0, 0.0);
framePtr = F.prev;
return result_43143[0];
}
function move_43186(v_43188) {

var result_43189 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.move",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43189[0], 1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, v_43188.x, v_43188.y);
framePtr = F.prev;
return result_43189[0];
}
function determinant_43258(t_43260) {

var result_43261 = 0.0;
var F={procname:"basic2d.determinant",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 277;
result_43261 = ((t_43260.ax * t_43260.by) - (t_43260.bx * t_43260.ay));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_43261;
}
function inverse_43266(m_43268) {

var result_43269 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.inverse",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 288;
var d_43270 = determinant_43258(m_43268);
if ((d_43270 == 0.0)) {
F.line = 290;
F.line = 2577;
var e_43277 = null;
e_43277 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
F.line = 2579;
e_43277.message = nimCopy(null, makeNimstrLit("Cannot invert a zero determinant matrix"), NTI138);
F.line = 2580;
e_43277.parent = null;
raiseException(e_43277, "DivByZeroError");
}

setElements_43114(result_43269[0], (m_43268.by / d_43270), (-(m_43268.ay) / d_43270), (-(m_43268.bx) / d_43270), (m_43268.ax / d_43270), (((m_43268.bx * m_43268.ty) - (m_43268.by * m_43268.tx)) / d_43270), (((m_43268.ay * m_43268.tx) - (m_43268.ax * m_43268.ty)) / d_43270));
framePtr = F.prev;
return result_43269[0];
}
function amp__43952(p_43954, t_43955) {

var result_43956 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 688;
result_43956.x = (((p_43954.x * t_43955.ax) + (p_43954.y * t_43955.bx)) + t_43955.tx);
F.line = 689;
result_43956.y = (((p_43954.x * t_43955.ay) + (p_43954.y * t_43955.by)) + t_43955.ty);
framePtr = F.prev;
return result_43956;
}
function point2d_43052(x_43054, y_43055) {

var result_43916 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.point2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 654;
result_43916.x = x_43054;
F.line = 655;
result_43916.y = y_43055;
framePtr = F.prev;
return result_43916;
}
function screenPos2Coords_57297(game_57299, pos_57300) {

var result_57301 = {x: 0, y: 0};
var F={procname:"html5_game.screenPos2Coords",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 109;
var xform_inv_57303 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57299.hexRadius))), move_43186(game_57299.topPos));
F.line = 110;
var xform_57304 = inverse_43266(xform_inv_57303);
F.line = 111;
var proj_57305 = amp__43952(point2d_43052(pos_57300.x, pos_57300.y), xform_57304);
F.line = 113;
result_57301.x = ((proj_57305.x + 5.0000000000000000e-01)|0);
F.line = 114;
result_57301.y = ((proj_57305.y + 5.0000000000000000e-01)|0);
framePtr = F.prev;
return result_57301;
}
function inside_56188(grid_56190, ind_56191) {

var Tmp1;
var result_56192 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 103;
if (!(0 <= ind_56191)) Tmp1 = false; else {Tmp1 = (ind_56191 < nTiles_56142(grid_56190)); }result_56192 = Tmp1;
framePtr = F.prev;
return result_56192;
}
function getStateAt_56458(grid_56460, ind_56461) {

var result_56462 = 0;
var F={procname:"logic.getStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 171;
result_56462 = grid_56460.tileStates[chckIndx(ind_56461, 0, grid_56460.tileStates.length)-0];
framePtr = F.prev;
return result_56462;
}
function X5BX5D__56468(grid_56470, ind_56471) {

var result_56472 = 0;
var F={procname:"logic.[]",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 174;
result_56472 = getStateAt_56458(grid_56470, ind_56471);
framePtr = F.prev;
return result_56472;
}
function isEmptyAt_56498(grid_56500, ind_56501) {

var result_56502 = false;
var F={procname:"logic.isEmptyAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 183;
result_56502 = (X5BX5D__56468(grid_56500, ind_56501) == 0);
framePtr = F.prev;
return result_56502;
}
function isVoidAt_56538(grid_56540, ind_56541) {

var result_56542 = false;
var F={procname:"logic.isVoidAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 189;
result_56542 = (!(inside_56188(grid_56540, ind_56541)) || isEmptyAt_56498(grid_56540, ind_56541));
framePtr = F.prev;
return result_56542;
}
function newCoords_56137(x_56139, y_56140) {

var result_56141 = {x: 0, y: 0};
var F={procname:"logic.newCoords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 87;
result_56141.x = x_56139;
F.line = 88;
result_56141.y = y_56140;
framePtr = F.prev;
return result_56141;
}
function ind2Coords_56146(grid_56148, ind_56149) {

var result_56150 = {x: 0, y: 0};
var F={procname:"logic.ind2Coords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 92;
nimCopy(result_56150, newCoords_56137(modInt(ind_56149, grid_56148.width), divInt(ind_56149, grid_56148.width)), NTI56010);
framePtr = F.prev;
return result_56150;
}
function setStateAt_56478(grid_56480, ind_56481, newState_56482) {

var F={procname:"logic.setStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 177;
grid_56480.tileStates[chckIndx(ind_56481, 0, grid_56480.tileStates.length)-0] = newState_56482;
framePtr = F.prev;
}
function X5BX5Deq__56488(grid_56490, ind_56491, newState_56492) {

var F={procname:"logic.[]=",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
setStateAt_56478(grid_56490, ind_56491, newState_56492);
framePtr = F.prev;
}
function flipStateAt_56560(grid_56562, ind_56563) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
X5BX5Deq__56488(grid_56562, ind_56563, tileStates2Opposite_56548[chckIndx(X5BX5D__56468(grid_56562, ind_56563), 0, tileStates2Opposite_56548.length)-0]);
framePtr = F.prev;
}
function coords2Ind_56151(grid_56153, coords_56154) {

var result_56155 = 0;
var F={procname:"logic.coords2Ind",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 93;
result_56155 = addInt(coords_56154.x, mulInt(coords_56154.y, grid_56153.width));
framePtr = F.prev;
return result_56155;
}
function flipStateAt_56564(grid_56566, coords_56567) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipStateAt_56560(grid_56566, coords2Ind_56151(grid_56566, coords_56567));
framePtr = F.prev;
}
function dotdot__38470(a_38474, b_38476) {

var result_38478 = {a: 0, b: 0};
var F={procname:".....",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 274;
result_38478.a = a_38474;
F.line = 275;
result_38478.b = b_38476;
framePtr = F.prev;
return result_38478;
}
function plus__56259(p1_56261, p2_56262) {

var result_56263 = {x: 0, y: 0};
var F={procname:"logic.+",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 140;
nimCopy(result_56263, newCoords_56137(addInt(p1_56261.x, p2_56262.x), addInt(p1_56261.y, p2_56262.y)), NTI56010);
framePtr = F.prev;
return result_56263;
}
function inside_56193(grid_56195, coords_56196) {

var Tmp1;
var Tmp2;
var Tmp3;
var result_56197 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 105;
if (!(0 <= coords_56196.x)) Tmp3 = false; else {Tmp3 = (0 <= coords_56196.y); }if (!Tmp3) Tmp2 = false; else {Tmp2 = (coords_56196.x < grid_56195.width); }if (!Tmp2) Tmp1 = false; else {Tmp1 = (coords_56196.y < grid_56195.width); }result_56197 = Tmp1;
framePtr = F.prev;
return result_56197;
}
function flipWithNeighbors_56568(grid_56570, ind_56571) {

var F={procname:"logic.flipWithNeighbors",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 202;
var neighbor_56572 = {x: 0, y: 0};
F.line = 167;
var coords_56580 = ind2Coords_56146(grid_56570, ind_56571);
L2: do {
F.line = 168;
var neighbor_56582 = {x: 0, y: 0};
F.line = 162;
neighbor_56582 = coords_56580;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
L3: do {
F.line = 163;
var neighbor_56584 = {x: 0, y: 0};
L4: do {
F.line = 144;
var i_56586 = 0;
F.line = 2074;
var colontmp__56588 = {a: 0, b: 0};
F.line = 144;
colontmp__56588 = dotdot__38470(0, 5);
L5: do {
F.line = 2077;
var x_56590 = 0;
F.line = 1943;
var colontmp__56592 = 0;
F.line = 1943;
var colontmp__56594 = 0;
F.line = 2077;
colontmp__56592 = colontmp__56588.a;
F.line = 2077;
colontmp__56594 = colontmp__56588.b;
F.line = 1925;
var res_56596 = colontmp__56592;
L6: do {
F.line = 1926;
L7: while (true) {
if (!(res_56596 <= colontmp__56594)) break L7;
F.line = 1927;
x_56590 = res_56596;
F.line = 2078;
i_56586 = x_56590;
F.line = 145;
var dir_56601 = chckRange(i_56586, 0, 5);
F.line = 151;
var offset_56603 = nimCopy(null, directions2CoordsOffsets_56247[chckIndx(dir_56601, 0, directions2CoordsOffsets_56247.length)-0], NTI56010);
F.line = 152;
var neighCand_56605 = plus__56259(coords_56580, offset_56603);
if (inside_56193(grid_56570, neighCand_56605)) {
F.line = 154;
neighbor_56584 = neighCand_56605;
F.line = 164;
neighbor_56582 = neighbor_56584;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
}

res_56596 = addInt(res_56596, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function actionAt_56610(grid_56612, ind_56613) {

var result_56614 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
if (!(isVoidAt_56538(grid_56612, ind_56613))) {
flipWithNeighbors_56568(grid_56612, ind_56613);
F.line = 209;
result_56614 = true;
}

framePtr = F.prev;
return result_56614;
}
function actionAt_56615(grid_56617, coords_56618) {

var result_56619 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 210;
result_56619 = actionAt_56610(grid_56617, coords2Ind_56151(grid_56617, coords_56618));
framePtr = F.prev;
return result_56619;
}
function isRaisedAt_56518(grid_56520, ind_56521) {

var result_56522 = false;
var F={procname:"logic.isRaisedAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 186;
result_56522 = (X5BX5D__56468(grid_56520, ind_56521) == 2);
framePtr = F.prev;
return result_56522;
}
function isWin_56620(grid_56622) {

var result_56623 = false;
var F={procname:"logic.isWin",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 213;
result_56623 = true;
L1: do {
F.line = 214;
var ind_56624 = 0;
L2: do {
F.line = 96;
var i_56629 = 0;
F.line = 3714;
var colontmp__56631 = 0;
F.line = 96;
colontmp__56631 = nTiles_56142(grid_56622);
F.line = 3715;
var i_56633 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56633 < colontmp__56631)) break L4;
F.line = 3717;
i_56629 = i_56633;
F.line = 97;
ind_56624 = i_56629;
if ((!(isEmptyAt_56498(grid_56622, ind_56624)) && !(isRaisedAt_56518(grid_56622, ind_56624)))) {
F.line = 216;
result_56623 = false;
F.line = 217;
break BeforeRet;
}

i_56633 = addInt(i_56633, 1);
}
} while(false);
} while(false);
} while(false);
} while (false); 
framePtr = F.prev;
return result_56623;
}
function reset_57280(game_57282) {

var F={procname:"html5_game.reset",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 56;
game_57282.nMoves = 0;
F.line = 57;
game_57282.isWin = false;
randomize_56198(game_57282.grid);
framePtr = F.prev;
}
function logic_57357(game_57359) {

var F={procname:"html5_game.logic",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
if ((game_57359.inputs[4] != undefined)) {
if (!(game_57359.isWin)) {
F.line = 153;
var coords_57371 = screenPos2Coords_57297(game_57359, vector2d_43048(game_57359.currentMousePos.x, game_57359.currentMousePos.y));
if (actionAt_56615(game_57359.grid, coords_57371)) {
game_57359.nMoves = addInt(game_57359.nMoves, 1);
}

F.line = 156;
game_57359.isWin = isWin_56620(game_57359.grid);
}
else {
reset_57280(game_57359);
}

}

if ((game_57359.inputs[2] != undefined)) {
reset_57280(game_57359);
}

delete game_57359.inputs[4];
framePtr = F.prev;
}
function fillStyleeq__46289(ctx_46291, color_46292) {

var F={procname:"html5_canvas.fillStyle=",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/CanvasRenderingContext2D.nim",line:0};
framePtr = F;
F.line = 44;
ctx_46291.fillStyle=color_46292;framePtr = F.prev;
}
function rgb_46201(r_46203, g_46204, b_46205) {

var result_46206 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 8;
result_46206 = toJSStr((makeNimstrLit("rgb(").slice(0,-1)).concat(cstrToNimstr((r_46203)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((g_46204)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((b_46205)+"").slice(0,-1),makeNimstrLit(")")));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46206;
}
function coords2ScreenPos_57283(game_57285, coords_57286) {

var result_57287 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.coords2ScreenPos",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 96;
var c_57288 = point2d_43052(coords_57286.x, coords_57286.y);
F.line = 97;
var xform_57290 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57285.hexRadius))), move_43186(game_57285.topPos));
F.line = 98;
var p_57291 = amp__43952(c_57288, xform_57290);
F.line = 99;
result_57287.x = p_57291.x;
F.line = 100;
result_57287.y = p_57291.y;
framePtr = F.prev;
return result_57287;
}
function extractRGB_45237(a_45239) {

var result_45246 = {Field0: 0, Field1: 0, Field2: 0};
var F={procname:"colors.extractRGB",prev:framePtr,filename:"lib/pure/colors.nim",line:0};
framePtr = F;
F.line = 55;
result_45246.Field0 = (((a_45239 >>> 0) >>> 16) & 255);
F.line = 56;
result_45246.Field1 = (((a_45239 >>> 0) >>> 8) & 255);
F.line = 57;
result_45246.Field2 = (a_45239 & 255);
framePtr = F.prev;
return result_45246;
}
function rgb_46207(clr_46209) {

var result_46210 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 12;
var comp_46211 = extractRGB_45237(clr_46209);
F.line = 13;
result_46210 = rgb_46201(comp_46211.Field0, comp_46211.Field1, comp_46211.Field2);
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46210;
}
function newSeq_47023(len_47027) {

var result_47029 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_47029 = new Array(len_47027); for (var i=0;i<len_47027;++i) {result_47029[i]={x: 0.0, y: 0.0};}framePtr = F.prev;
return result_47029;
}
function degToRad_44436(deg_44438) {

var result_44439 = 0.0;
var F={procname:"basic2d.degToRad",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 850;
result_44439 = (deg_44438 / 5.7295779513082323e+01);
framePtr = F.prev;
return result_44439;
}
function plus__43986(p_43988, v_43989) {

var result_43990 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 718;
result_43990.x = (p_43988.x + v_43989.x);
F.line = 719;
result_43990.y = (p_43988.y + v_43989.y);
framePtr = F.prev;
return result_43990;
}
function polar_44062(p_44064, ang_44065, dist_44066) {

var result_44067 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.polar",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 753;
result_44067.x = (p_44064.x + (Math.cos(ang_44065) * dist_44066));
F.line = 754;
result_44067.y = (p_44064.y + (Math.sin(ang_44065) * dist_44066));
framePtr = F.prev;
return result_44067;
}
function genNGonPoints_47002(center_47004, radius_47005, n_47006, rotate_47007) {

var result_47009 = null;
var F={procname:"geometry.genNGonPoints",prev:framePtr,filename:"hexcapepkg/geometry.nim",line:0};
framePtr = F;
F.line = 5;
result_47009 = nimCopy(null, newSeq_47023(chckRange(n_47006, 0, 2147483647)), NTI47028);
L1: do {
F.line = 7;
var i_47057 = 0;
F.line = 3715;
var i_47064 = 0;
L2: do {
F.line = 3716;
L3: while (true) {
if (!(i_47064 < n_47006)) break L3;
F.line = 3717;
i_47057 = i_47064;
F.line = 8;
var startAngle_47058 = degToRad_44436(((i_47057 * (3.6000000000000000e+02 / n_47006)) + rotate_47007));
F.line = 9;
nimCopy(result_47009[chckIndx(i_47057, 0, result_47009.length)-0], plus__43986(polar_44062(ORIGO_43057, startAngle_47058, radius_47005), center_47004), NTI43021);
i_47064 = addInt(i_47064, 1);
}
} while(false);
} while(false);
framePtr = F.prev;
return result_47009;
}
function sysFatal_21421(message_21427) {

var F={procname:"sysFatal.sysFatal",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 2597;
var e_21429 = null;
e_21429 = {m_type: NTI3446, parent: null, name: null, message: null, trace: null};
F.line = 2599;
e_21429.message = nimCopy(null, message_21427, NTI138);
F.line = 2600;
raiseException(e_21429, "AssertionError");
framePtr = F.prev;
}
function raiseAssert_21416(msg_21418) {

var F={procname:"system.raiseAssert",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
sysFatal_21421(msg_21418);
framePtr = F.prev;
}
function failedAssertImpl_21439(msg_21441) {

var F={procname:"system.failedAssertImpl",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
raiseAssert_21416(msg_21441);
framePtr = F.prev;
}
function drawNGon_57007(ctx_57009, points_57011) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57009.beginPath();
ctx_57009.moveTo(points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].x, points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].y);
L1: do {
F.line = 17;
var p_57202 = {x: 0.0, y: 0.0};
F.line = 3523;
var i_57206 = 0;
F.line = 3524;
var L_57208 = (points_57011 != null ? points_57011.length : 0);
L2: do {
F.line = 3525;
L3: while (true) {
if (!(i_57206 < L_57208)) break L3;
F.line = 3526;
p_57202 = points_57011[chckIndx(i_57206, 0, points_57011.length)-0];
ctx_57009.lineTo(p_57202.x, p_57202.y);
i_57206 = addInt(i_57206, 1);
if (!(((points_57011 != null ? points_57011.length : 0) == L_57208))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
ctx_57009.closePath();
ctx_57009.fill();
framePtr = F.prev;
}
function drawNGon_57209(ctx_57211, center_57212, radius_57213, n_57214, rotate_57215) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 24;
var points_57216 = genNGonPoints_47002(center_57212, radius_57213, n_57214, rotate_57215);
drawNGon_57007(ctx_57211, points_57216);
framePtr = F.prev;
}
function plus__43598(a_43587, b_43589) {

var result_43600 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 121;
nimCopy(result_43600, vector2d_43048((a_43587.x + b_43589.x), (a_43587.y + b_43589.y)), NTI43023);
framePtr = F.prev;
return result_43600;
}
function drawHexGrid_57311(game_57313) {

var F={procname:"html5_game.drawHexGrid",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
L1: do {
F.line = 117;
var coords_57314 = {x: 0, y: 0};
F.line = 99;
var colontmp__57320 = null;
F.line = 117;
colontmp__57320 = game_57313.grid;
L2: do {
F.line = 100;
var i_57325 = 0;
L3: do {
F.line = 96;
var i_57327 = 0;
F.line = 3714;
var colontmp__57329 = 0;
F.line = 96;
colontmp__57329 = nTiles_56142(colontmp__57320);
F.line = 3715;
var i_57331 = 0;
L4: do {
F.line = 3716;
L5: while (true) {
if (!(i_57331 < colontmp__57329)) break L5;
F.line = 3717;
i_57327 = i_57331;
F.line = 97;
i_57325 = i_57327;
F.line = 101;
coords_57314 = ind2Coords_56146(colontmp__57320, i_57325);
L6: do {
F.line = 119;
var ind_57315 = coords2Ind_56151(game_57313.grid, coords_57314);
F.line = 120;
var currentCenter_57316 = coords2ScreenPos_57283(game_57313, coords_57314);
F.line = 121;
var color_57317 = tileStates2Colors_57217[chckIndx(getStateAt_56458(game_57313.grid, ind_57315), 0, tileStates2Colors_57217.length)-0];
if (isEmptyAt_56498(game_57313.grid, ind_57315)) {
F.line = 123;
break L6;
}

fillStyleeq__46289(game_57313.renderer, rgb_46207(0));
drawNGon_57209(game_57313.renderer, plus__43598(currentCenter_57316, vector2d_43048(2.0000000000000000e+00, 2.0000000000000000e+00)), game_57313.hexRadius, 6, 3.0000000000000000e+01);
fillStyleeq__46289(game_57313.renderer, color_57317);
drawNGon_57209(game_57313.renderer, currentCenter_57316, game_57313.hexRadius, 6, 3.0000000000000000e+01);
} while(false);
i_57331 = addInt(i_57331, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function renderText_57001(ctx_57003, text_57004, x_57005, y_57006) {

var F={procname:"html5_game.renderText",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57003.fillText(toJSStr(text_57004), x_57005, y_57006);
framePtr = F.prev;
}
function render_57336(game_57338) {

var F={procname:"html5_game.render",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
fillStyleeq__46289(game_57338.renderer, rgb_46201(110, 132, 174));
game_57338.renderer.fillRect(0.0, 0.0, 1.2800000000000000e+03, 7.2000000000000000e+02);
drawHexGrid_57311(game_57338);
F.line = 142;
game_57338.renderer.font = "16px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(0));
renderText_57001(game_57338.renderer, (makeNimstrLit("Moves: ").slice(0,-1)).concat(cstrToNimstr((game_57338.nMoves)+"")), 1.1800000000000000e+03, 6.0000000000000000e+01);
if (game_57338.isWin) {
F.line = 146;
game_57338.renderer.font = "48px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(16777215));
renderText_57001(game_57338.renderer, makeNimstrLit("Won!"), 1.1800000000000000e+03, 9.0000000000000000e+01);
}

framePtr = F.prev;
}
function loop_57517() {

var F={procname:"html5_game.loop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
logic_57357(game_57420[0]);
render_57336(game_57420[0]);
requestAnimationFrame(loop_57517);
framePtr = F.prev;
}
function main_57519() {

var F={procname:"html5_game.main",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
loop_57517();
framePtr = F.prev;
}
main_57519();
</script></body></html>
<html><body oncontextmenu=return false; style=margin: 0><script>
/* Generated by the Nim Compiler v0.16.1 */
/*   (c) 2017 Andreas Rumpf */

var framePtr = null;
var excHandler = 0;
var lastJSError = null;
if (typeof Int8Array === 'undefined') Int8Array = Array;
if (typeof Int16Array === 'undefined') Int16Array = Array;
if (typeof Int32Array === 'undefined') Int32Array = Array;
if (typeof Uint8Array === 'undefined') Uint8Array = Array;
if (typeof Uint16Array === 'undefined') Uint16Array = Array;
if (typeof Uint32Array === 'undefined') Uint32Array = Array;
if (typeof Float32Array === 'undefined') Float32Array = Array;
if (typeof Float64Array === 'undefined') Float64Array = Array;
var NTI3446 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI47028 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI57220 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56250 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56551 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56010 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI43021 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3454 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56004 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56043 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI56002 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56041 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI3458 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI124 = {size: 0,kind: 36,base: null,node: null,finalizer: null};
var NTI43023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3440 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI104 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI12609 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI3408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI138 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI140 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI3485 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI3424 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3438 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3442 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NNI3442 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3442.node = NNI3442;
var NNI3438 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3438.node = NNI3438;
NTI3485.base = NTI3424;
var NNI3424 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI3485, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI140, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI138, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI138, name: "trace", sons: null}]};
NTI3424.node = NNI3424;
var NNI3408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3408.node = NNI3408;
NTI3424.base = NTI3408;
NTI3438.base = NTI3424;
NTI3442.base = NTI3438;
var NNI12609 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI140, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI104, name: "Field1", sons: null}]};
NTI12609.node = NNI12609;
var NNI3440 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3440.node = NNI3440;
NTI3440.base = NTI3438;
var NNI43023 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43023.node = NNI43023;
var NNI3458 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3458.node = NNI3458;
NTI3458.base = NTI3424;
var NNI56002 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: [{kind: 1, offset: 0, typ: NTI56002, name: "tsEmpty", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56002, name: "tsCollapsed", len: 0, sons: null}, 
{kind: 1, offset: 2, typ: NTI56002, name: "tsRaised", len: 0, sons: null}]};
NTI56002.node = NNI56002;
NTI56041.base = NTI56002;
var NNI56004 = {kind: 2, offset: 0, typ: null, name: null, len: 2, sons: [{kind: 1, offset: 0, typ: NTI56004, name: "ttAllNeighbors", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56004, name: "ttLeftRight", len: 0, sons: null}]};
NTI56004.node = NNI56004;
NTI56043.base = NTI56004;
var NNI3454 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3454.node = NNI3454;
NTI3454.base = NTI3424;
var NNI43021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43021.node = NNI43021;
var NNI56010 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI104, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI104, name: "y", sons: null}]};
NTI56010.node = NNI56010;
NTI56551.base = NTI56002;
NTI56250.base = NTI56010;
NTI57220.base = NTI140;
NTI47028.base = NTI43021;
var NNI3446 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3446.node = NNI3446;
NTI3446.base = NTI3424;
function makeNimstrLit(c_13603) {

    var ln = c_13603.length;
    var result = new Array(ln + 1);
    var i = 0;
    for (; i < ln; ++i) {
      result[i] = c_13603.charCodeAt(i);
    }
    result[i] = 0; // terminating zero
    return result;
    }
function SetConstr() {

      var result = {};
      for (var i = 0; i < arguments.length; ++i) {
        var x = arguments[i];
        if (typeof(x) == "object") {
          for (var j = x[0]; j <= x[1]; ++j) {
            result[j] = true;
          }
        } else {
          result[x] = true;
        }
      }
      return result;
    }
function nimCopy(dest_18818, src_18819, ti_18820) {

var result_19229 = null;
switch (ti_18820.kind) {
case 21: case 22: case 23: case 5: if (!(isFatPointer_18801(ti_18820))) {
result_19229 = src_18819;
}
else {
result_19229 = [src_18819[0], src_18819[1]];}


break;
case 19:       if (dest_18818 === null || dest_18818 === undefined) {
        dest_18818 = {};
      }
      else {
        for (var key in dest_18818) { delete dest_18818[key]; }
      }
      for (var key in src_18819) { dest_18818[key] = src_18819[key]; }
      result_19229 = dest_18818;
    
break;
case 18: case 17: if (!((ti_18820.base == null))) {
result_19229 = nimCopy(dest_18818, src_18819, ti_18820.base);
}
else {
if ((ti_18820.kind == 17)) {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {m_type: ti_18820} : dest_18818;}
else {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {} : dest_18818;}
}
nimCopyAux(result_19229, src_18819, ti_18820.node);

break;
case 24: case 4: case 27: case 16:       if (src_18819 === null) {
        result_19229 = null;
      }
      else {
        if (dest_18818 === null || dest_18818 === undefined) {
          dest_18818 = new Array(src_18819.length);
        }
        else {
          dest_18818.length = src_18819.length;
        }
        result_19229 = dest_18818;
        for (var i = 0; i < src_18819.length; ++i) {
          result_19229[i] = nimCopy(result_19229[i], src_18819[i], ti_18820.base);
        }
      }
    
break;
case 28:       if (src_18819 !== null) {
        result_19229 = src_18819.slice(0);
      }
    
break;
default: 
result_19229 = src_18819;
break;
}
return result_19229;
}
function eqStrings(a_16203, b_16204) {

    if (a_16203 == b_16204) return true;
    if ((!a_16203) || (!b_16204)) return false;
    var alen = a_16203.length;
    if (alen != b_16204.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_16203[i] != b_16204[i]) return false;
    return true;
  }
function arrayConstr(len_19403, value_19404, typ_19405) {

      var result = new Array(len_19403);
      for (var i = 0; i < len_19403; ++i) result[i] = nimCopy(null, value_19404, typ_19405);
      return result;
    }
function cstrToNimstr(c_13803) {

  var ln = c_13803.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_13803.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else if((ch > 127) && (ch < 2048)) {
      result[r] = (ch >> 6) | 192;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    else {
      result[r] = (ch >> 12) | 224;
      ++r;
      result[r] = ((ch >> 6) & 63) | 128;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  result[r] = 0; // terminating zero
  return result;
  }
function toJSStr(s_14003) {

    var len = s_14003.length-1;
    var asciiPart = new Array(len);
    var fcc = String.fromCharCode;
    var nonAsciiPart = null;
    var nonAsciiOffset = 0;
    for (var i = 0; i < len; ++i) {
      if (nonAsciiPart !== null) {
        var offset = (i - nonAsciiOffset) * 2;
        var code = s_14003[i].toString(16);
        if (code.length == 1) {
          code = "0"+code;
        }
        nonAsciiPart[offset] = "%";
        nonAsciiPart[offset + 1] = code;
      }
      else if (s_14003[i] < 128)
        asciiPart[i] = fcc(s_14003[i]);
      else {
        asciiPart.length = i;
        nonAsciiOffset = i;
        nonAsciiPart = new Array((len - i) * 2);
        --i;
      }
    }
    asciiPart = asciiPart.join("");
    return (nonAsciiPart === null) ?
        asciiPart : asciiPart + decodeURIComponent(nonAsciiPart.join(""));
  }
function raiseException(e_13006, ename_13007) {

e_13006.name = ename_13007;
if ((excHandler == 0)) {
unhandledException(e_13006);
}

e_13006.trace = nimCopy(null, rawWriteStackTrace_12828(), NTI138);
throw e_13006;}
function mulInt(a_16803, b_16804) {

      var result = a_16803 * b_16804;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function chckRange(i_19415, a_19416, b_19417) {

var Tmp1;
var result_19418 = 0;
BeforeRet: do {
if (!(a_19416 <= i_19415)) Tmp1 = false; else {Tmp1 = (i_19415 <= b_19417); }if (Tmp1) {
result_19418 = i_19415;
break BeforeRet;
}
else {
raiseRangeError();
}

} while (false); 
return result_19418;
}
function chckIndx(i_19409, a_19410, b_19411) {

var Tmp1;
var result_19412 = 0;
BeforeRet: do {
if (!(a_19410 <= i_19409)) Tmp1 = false; else {Tmp1 = (i_19409 <= b_19411); }if (Tmp1) {
result_19412 = i_19409;
break BeforeRet;
}
else {
raiseIndexError();
}

} while (false); 
return result_19412;
}
function addInt(a_16460, b_16461) {

      var result = a_16460 + b_16461;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function modInt(a_17203, b_17204) {

      if (b_17204 == 0) raiseDivByZero();
      if (b_17204 == -1 && a_17203 == 2147483647) raiseOverflow();
      return Math.floor(a_17203 % b_17204);
    }
function divInt(a_17003, b_17004) {

      if (b_17004 == 0) raiseDivByZero();
      if (b_17004 == -1 && a_17003 == 2147483647) raiseOverflow();
      return Math.floor(a_17003 / b_17004);
    }
var tileStates2Opposite_56548 = nimCopy(null, [0, 2, 1], NTI56551);
var directions2CoordsOffsets_56247 = nimCopy(null, [{x: 0, y: 1}, {x: -1, y: 1}, {x: -1, y: 0}, {x: 0, y: -1}, {x: 1, y: -1}, {x: 1, y: 0}], NTI56250);
var tileStates2Colors_57217 = nimCopy(null, ["rgb(0,0,0)", "rgb(200,200,255)", "rgb(80,120,240)"], NTI57220);
function subInt(a_16603, b_16604) {

      var result = a_16603 - b_16604;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
var nimvm_5887 = false;
var nim_program_result = 0;
var globalRaiseHook_10614 = [null];
var localRaiseHook_10619 = [null];
var outOfMemHook_10622 = [null];
function isFatPointer_18801(ti_18803) {

var result_18804 = false;
BeforeRet: do {
result_18804 = !((SetConstr(17, 16, 4, 18, 27, 19, 23, 22, 21)[ti_18803.base.kind] != undefined));
break BeforeRet;
} while (false); 
return result_18804;
}
function nimCopyAux(dest_18823, src_18824, n_18826) {

switch (n_18826.kind) {
case 0: 
break;
case 1:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
    
break;
case 2: L1: do {
var i_19215 = 0;
var colontmp__19217 = 0;
colontmp__19217 = (n_18826.len - 1);
var res_19220 = 0;
L2: do {
L3: while (true) {
if (!(res_19220 <= colontmp__19217)) break L3;
i_19215 = res_19220;
nimCopyAux(dest_18823, src_18824, n_18826.sons[i_19215]);
res_19220 += 1;
}
} while(false);
} while(false);

break;
case 3:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
      for (var i = 0; i < n_18826.sons.length; ++i) {
        nimCopyAux(dest_18823, src_18824, n_18826.sons[i][1]);
      }
    
break;
}
}
function add_10638(x_10641, x_10641_Idx, y_10642) {

        var len = x_10641[0].length-1;
        for (var i = 0; i < y_10642.length; ++i) {
          x_10641[0][len] = y_10642.charCodeAt(i);
          ++len;
        }
        x_10641[0][len] = 0
      }
function auxWriteStackTrace_12604(f_12606) {

var Tmp3;
var result_12607 = [null];
var it_12615 = f_12606;
var i_12616 = 0;
var total_12617 = 0;
var tempFrames_12621 = arrayConstr(64, {Field0: null, Field1: 0}, NTI12609);
L1: do {
L2: while (true) {
if (!!((it_12615 == null))) Tmp3 = false; else {Tmp3 = (i_12616 <= 63); }if (!Tmp3) break L2;
tempFrames_12621[i_12616].Field0 = it_12615.procname;
tempFrames_12621[i_12616].Field1 = it_12615.line;
i_12616 += 1;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
L4: do {
L5: while (true) {
if (!!((it_12615 == null))) break L5;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
result_12607[0] = nimCopy(null, makeNimstrLit(""), NTI138);
if (!((total_12617 == i_12616))) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("(")); } else { result_12607[0] = makeNimstrLit("(");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr(((total_12617 - i_12616))+"")); } else { result_12607[0] = cstrToNimstr(((total_12617 - i_12616))+"");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(" calls omitted) ...\x0A")); } else { result_12607[0] = makeNimstrLit(" calls omitted) ...\x0A");};
}

L6: do {
var j_12815 = 0;
var colontmp__12821 = 0;
colontmp__12821 = (i_12616 - 1);
var res_12824 = colontmp__12821;
L7: do {
L8: while (true) {
if (!(0 <= res_12824)) break L8;
j_12815 = res_12824;
add_10638(result_12607, 0, tempFrames_12621[j_12815].Field0);
if ((0 < tempFrames_12621[j_12815].Field1)) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(", line: ")); } else { result_12607[0] = makeNimstrLit(", line: ");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr((tempFrames_12621[j_12815].Field1)+"")); } else { result_12607[0] = cstrToNimstr((tempFrames_12621[j_12815].Field1)+"");};
}

if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("\x0A")); } else { result_12607[0] = makeNimstrLit("\x0A");};
res_12824 -= 1;
}
} while(false);
} while(false);
return result_12607[0];
}
function rawWriteStackTrace_12828() {

var result_12830 = null;
if (!((framePtr == null))) {
result_12830 = nimCopy(null, (makeNimstrLit("Traceback (most recent call last)\x0A").slice(0,-1)).concat(auxWriteStackTrace_12604(framePtr)), NTI138);
}
else {
result_12830 = nimCopy(null, makeNimstrLit("No stack traceback available\x0A"), NTI138);
}

return result_12830;
}
function unhandledException(e_12854) {

var Tmp1;
var buf_12855 = /**/[makeNimstrLit("")];
if (!!(eqStrings(e_12854.message, null))) Tmp1 = false; else {Tmp1 = !((e_12854.message[0] == 0)); }if (Tmp1) {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception: ")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception: ");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(e_12854.message); } else { buf_12855[0] = e_12854.message;};
}
else {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception");};
}

if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit(" [")); } else { buf_12855[0] = makeNimstrLit(" [");};
add_10638(buf_12855, 0, e_12854.name);
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("]\x0A")); } else { buf_12855[0] = makeNimstrLit("]\x0A");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(rawWriteStackTrace_12828()); } else { buf_12855[0] = rawWriteStackTrace_12828();};
var cbuf_13001 = toJSStr(buf_12855[0]);
framePtr = null;
  if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_13001);
  }
  else {
    throw cbuf_13001;
  }
  }
function raiseOverflow() {

var e_13441 = null;
e_13441 = {m_type: NTI3442, parent: null, name: null, message: null, trace: null};
e_13441.message = nimCopy(null, makeNimstrLit("over- or underflow"), NTI138);
e_13441.parent = null;
raiseException(e_13441, "OverflowError");
}
function raiseDivByZero() {

var e_13459 = null;
e_13459 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
e_13459.message = nimCopy(null, makeNimstrLit("division by zero"), NTI138);
e_13459.parent = null;
raiseException(e_13459, "DivByZeroError");
}
var IDMATRIX_43056 = matrix2d_43040(1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, 0.0, 0.0);
var ORIGO_43057 = point2d_43052(0.0, 0.0);
var XAXIS_43058 = vector2d_43048(1.0000000000000000e+00, 0.0);
var YAXIS_43059 = vector2d_43048(0.0, 1.0000000000000000e+00);
var state_49605 = /**/[{a0: 1773455756, a1: 4275166512}];
function getTime_52042() {

var result_52413 = null;
var F={procname:"times.getTime",prev:framePtr,filename:"lib/pure/times.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 586;
result_52413 = new Date();
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_52413;
}
var startMilsecs_52448 = /**/[getTime_52042()];
function getContext2D_46713(c_46715) {

var result_46716 = null;
var F={procname:"html5_canvas.getContext2D",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/html5_canvas.nim",line:0};
framePtr = F;
F.line = 24;
result_46716=c_46715.getContext('2d');framePtr = F.prev;
return result_46716;
}
function vector2d_43048(x_43050, y_43051) {

var result_43317 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.vector2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 337;
result_43317.x = x_43050;
F.line = 338;
result_43317.y = y_43051;
framePtr = F.prev;
return result_43317;
}
function slash__20607(x_20609, y_20610) {

var result_20611 = 0.0;
var F={procname:"system./",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 3268;
result_20611 = (x_20609 / y_20610);
framePtr = F.prev;
return result_20611;
}
function newSeq_56072(len_56076) {

var result_56078 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56078 = new Array(len_56076); for (var i=0;i<len_56076;++i) {result_56078[i]=0;}framePtr = F.prev;
return result_56078;
}
function raiseRangeError() {

var e_13477 = null;
e_13477 = {m_type: NTI3458, parent: null, name: null, message: null, trace: null};
e_13477.message = nimCopy(null, makeNimstrLit("value out of range"), NTI138);
e_13477.parent = null;
raiseException(e_13477, "RangeError");
}
function newSeq_56111(len_56115) {

var result_56117 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56117 = new Array(len_56115); for (var i=0;i<len_56115;++i) {result_56117[i]=0;}framePtr = F.prev;
return result_56117;
}
function newHexGrid_56038(width_56040, tileStates_56042, tileTypes_56044) {

var result_56045 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56045 = {width: 0, tileStates: null, tileTypes: null};
F.line = 75;
result_56045.width = width_56040;
F.line = 76;
result_56045.tileStates = nimCopy(null, tileStates_56042, NTI56041);
F.line = 77;
result_56045.tileTypes = nimCopy(null, tileTypes_56044, NTI56043);
framePtr = F.prev;
return result_56045;
}
function newHexGrid_56054(width_56056) {

var result_56057 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 80;
F.line = 81;
var nTiles_56058 = mulInt(width_56056, width_56056);
F.line = 82;
var states_56097 = newSeq_56072(chckRange(nTiles_56058, 0, 2147483647));
F.line = 83;
var types_56136 = newSeq_56111(chckRange(nTiles_56058, 0, 2147483647));
result_56057 = newHexGrid_56038(width_56056, states_56097, types_56136);
framePtr = F.prev;
return result_56057;
}
function nTiles_56142(grid_56144) {

var result_56145 = 0;
var F={procname:"logic.nTiles",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 90;
result_56145 = mulInt(grid_56144.width, grid_56144.width);
framePtr = F.prev;
return result_56145;
}
function raiseIndexError() {

var e_13495 = null;
e_13495 = {m_type: NTI3454, parent: null, name: null, message: null, trace: null};
e_13495.message = nimCopy(null, makeNimstrLit("index out of bounds"), NTI138);
e_13495.parent = null;
raiseException(e_13495, "IndexError");
}
function rotl_49802(x_49804, k_49805) {

var result_49806 = 0;
var F={procname:"random.rotl",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 44;
result_49806 = ((x_49804 << k_49805) | ((x_49804 >>> 0) >>> ((64 - k_49805) >>> 0)));
framePtr = F.prev;
return result_49806;
}
function next_49846(s_49849) {

var result_49850 = 0;
var F={procname:"random.next",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 47;
var s0_49851 = s_49849.a0;
F.line = 48;
var s1_49852 = s_49849.a1;
F.line = 49;
result_49850 = ((s0_49851 + s1_49852) >>> 0);
F.line = 50;
s1_49852 = (s1_49852 ^ s0_49851);
F.line = 51;
s_49849.a0 = ((rotl_49802(s0_49851, 55) ^ s1_49852) ^ (s1_49852 << 14));
F.line = 52;
s_49849.a1 = rotl_49802(s1_49852, 36);
framePtr = F.prev;
return result_49850;
}
function random_50282(max_50284) {

var result_50285 = 0;
var F={procname:"random.random",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
BeforeRet: do {
L1: do {
F.line = 79;
L2: while (true) {
if (!true) break L2;
F.line = 80;
var x_50287 = next_49846(state_49605[0]);
if ((x_50287 < ((4294967295 - (4294967295 % chckRange(max_50284, 0, 4294967295))) >>> 0))) {
F.line = 82;
result_50285 = ((x_50287 % max_50284)|0);
break BeforeRet;
}

}
} while(false);
} while (false); 
framePtr = F.prev;
return result_50285;
}
function randomize_56198(grid_56200) {

var F={procname:"logic.randomize",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 108;
var i_56201 = 0;
L2: do {
F.line = 96;
var i_56208 = 0;
F.line = 3714;
var colontmp__56210 = 0;
F.line = 96;
colontmp__56210 = nTiles_56142(grid_56200);
F.line = 3715;
var i_56212 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56212 < colontmp__56210)) break L4;
F.line = 3717;
i_56208 = i_56212;
F.line = 97;
i_56201 = i_56208;
F.line = 109;
grid_56200.tileStates[chckIndx(i_56201, 0, grid_56200.tileStates.length)-0] = chckRange(random_50282(3), 0, 2);
i_56212 = addInt(i_56212, 1);
}
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function newGame_57265(renderer_57267) {

var result_57268 = null;
var F={procname:"html5_game.newGame",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
result_57268 = {renderer: null, pressedMousePos: {x: 0.0, y: 0.0}, currentMousePos: {x: 0.0, y: 0.0}, inputs: {}, grid: null, topPos: {x: 0.0, y: 0.0}, hexRadius: 0.0, nMoves: 0, isWin: false};
F.line = 49;
result_57268.renderer = renderer_57267;
F.line = 50;
nimCopy(result_57268.topPos, vector2d_43048(slash__20607(1280, 2), 5.0000000000000000e+01), NTI43023);
F.line = 51;
result_57268.hexRadius = 3.0000000000000000e+01;
F.line = 52;
result_57268.grid = newHexGrid_56054(5);
randomize_56198(result_57268.grid);
framePtr = F.prev;
return result_57268;
}
var Tmp1;
var canvasId_57408 = /**/[makeNimstrLit("canvas")];
var old_57409 = /**/[document.getElementById(toJSStr(canvasId_57408[0]))];
if (!((old_57409[0] === null))) {
Tmp1 = old_57409[0];
}
else {
Tmp1 = document.createElement(toJSStr(canvasId_57408[0]));
}

var canvas_57418 = /**/[Tmp1];
var ctx_57419 = /**/[getContext2D_46713(canvas_57418[0])];
var game_57420 = /**/[newGame_57265(ctx_57419[0])];
function offsetLeft_57421(el_57423) {

var result_57424 = 0.0;
var F={procname:"html5_game.offsetLeft",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 174;
el_57423.offsetLeft;framePtr = F.prev;
return result_57424;
}
function offsetTop_57425(el_57427) {

var result_57428 = 0.0;
var F={procname:"html5_game.offsetTop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 175;
el_57427.offsetTop;framePtr = F.prev;
return result_57428;
}
function relative_57432(ev_57434) {

var result_57435 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.relative",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 183;
var x_57436 = ev_57434.x;
F.line = 184;
var y_57437 = ev_57434.y;
F.line = 185;
var ol_57438 = offsetLeft_57421(ev_57434.target);
F.line = 186;
var ot_57439 = offsetTop_57425(ev_57434.target);
F.line = 187;
result_57435.x = (x_57436 - ol_57438);
F.line = 188;
result_57435.y = (y_57437 - ot_57439);
framePtr = F.prev;
return result_57435;
}
function stopPropagation_57442(ev_57444) {

var F={procname:"html5_game.stopPropagation",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 190;
ev_57444.stopPropagation();framePtr = F.prev;
}
function colonanonymous__57445(ev_57447) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 193;
nimCopy(game_57420[0].pressedMousePos, relative_57432(ev_57447), NTI43021);
game_57420[0].inputs[3] = true;
if ((ev_57447.button == 2)) {
game_57420[0].inputs[2] = true;
}

stopPropagation_57442(ev_57447);
framePtr = F.prev;
}
canvas_57418[0].onmousedown = colonanonymous__57445;
function colonanonymous__57470(ev_57472) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
delete game_57420[0].inputs[3];
game_57420[0].inputs[4] = true;
if ((ev_57472.button == 2)) {
delete game_57420[0].inputs[2];
}

stopPropagation_57442(ev_57472);
framePtr = F.prev;
}
canvas_57418[0].onmouseup = colonanonymous__57470;
function colonanonymous__57506(ev_57508) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 207;
nimCopy(game_57420[0].currentMousePos, relative_57432(ev_57508), NTI43021);
framePtr = F.prev;
}
canvas_57418[0].onmousemove = colonanonymous__57506;
canvas_57418[0].width = 1280;
canvas_57418[0].height = 720;
if ((old_57409[0] === null)) {
document.body.appendChild(canvas_57418[0]);
}

function setElements_43114(t_43117, ax_43118, ay_43119, bx_43120, by_43121, tx_43122, ty_43123) {

var F={procname:"basic2d.setElements",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 137;
t_43117.ax = ax_43118;
F.line = 138;
t_43117.ay = ay_43119;
F.line = 139;
t_43117.bx = bx_43120;
F.line = 140;
t_43117.by = by_43121;
F.line = 141;
t_43117.tx = tx_43122;
F.line = 142;
t_43117.ty = ty_43123;
framePtr = F.prev;
}
function amp__43134(a_43136, b_43137) {

var result_43138 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43138[0], ((a_43136.ax * b_43137.ax) + (a_43136.ay * b_43137.bx)), ((a_43136.ax * b_43137.ay) + (a_43136.ay * b_43137.by)), ((a_43136.bx * b_43137.ax) + (a_43136.by * b_43137.bx)), ((a_43136.bx * b_43137.ay) + (a_43136.by * b_43137.by)), (((a_43136.tx * b_43137.ax) + (a_43136.ty * b_43137.bx)) + b_43137.tx), (((a_43136.tx * b_43137.ay) + (a_43136.ty * b_43137.by)) + b_43137.ty));
framePtr = F.prev;
return result_43138[0];
}
function matrix2d_43040(ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047) {

var result_43132 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.matrix2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43132[0], ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047);
framePtr = F.prev;
return result_43132[0];
}
function scale_43140(s_43142) {

var result_43143 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.scale",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43143[0], s_43142, 0.0, 0.0, s_43142, 0.0, 0.0);
framePtr = F.prev;
return result_43143[0];
}
function move_43186(v_43188) {

var result_43189 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.move",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43189[0], 1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, v_43188.x, v_43188.y);
framePtr = F.prev;
return result_43189[0];
}
function determinant_43258(t_43260) {

var result_43261 = 0.0;
var F={procname:"basic2d.determinant",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 277;
result_43261 = ((t_43260.ax * t_43260.by) - (t_43260.bx * t_43260.ay));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_43261;
}
function inverse_43266(m_43268) {

var result_43269 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.inverse",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 288;
var d_43270 = determinant_43258(m_43268);
if ((d_43270 == 0.0)) {
F.line = 290;
F.line = 2577;
var e_43277 = null;
e_43277 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
F.line = 2579;
e_43277.message = nimCopy(null, makeNimstrLit("Cannot invert a zero determinant matrix"), NTI138);
F.line = 2580;
e_43277.parent = null;
raiseException(e_43277, "DivByZeroError");
}

setElements_43114(result_43269[0], (m_43268.by / d_43270), (-(m_43268.ay) / d_43270), (-(m_43268.bx) / d_43270), (m_43268.ax / d_43270), (((m_43268.bx * m_43268.ty) - (m_43268.by * m_43268.tx)) / d_43270), (((m_43268.ay * m_43268.tx) - (m_43268.ax * m_43268.ty)) / d_43270));
framePtr = F.prev;
return result_43269[0];
}
function amp__43952(p_43954, t_43955) {

var result_43956 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 688;
result_43956.x = (((p_43954.x * t_43955.ax) + (p_43954.y * t_43955.bx)) + t_43955.tx);
F.line = 689;
result_43956.y = (((p_43954.x * t_43955.ay) + (p_43954.y * t_43955.by)) + t_43955.ty);
framePtr = F.prev;
return result_43956;
}
function point2d_43052(x_43054, y_43055) {

var result_43916 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.point2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 654;
result_43916.x = x_43054;
F.line = 655;
result_43916.y = y_43055;
framePtr = F.prev;
return result_43916;
}
function screenPos2Coords_57297(game_57299, pos_57300) {

var result_57301 = {x: 0, y: 0};
var F={procname:"html5_game.screenPos2Coords",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 109;
var xform_inv_57303 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57299.hexRadius))), move_43186(game_57299.topPos));
F.line = 110;
var xform_57304 = inverse_43266(xform_inv_57303);
F.line = 111;
var proj_57305 = amp__43952(point2d_43052(pos_57300.x, pos_57300.y), xform_57304);
F.line = 113;
result_57301.x = ((proj_57305.x + 5.0000000000000000e-01)|0);
F.line = 114;
result_57301.y = ((proj_57305.y + 5.0000000000000000e-01)|0);
framePtr = F.prev;
return result_57301;
}
function inside_56188(grid_56190, ind_56191) {

var Tmp1;
var result_56192 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 103;
if (!(0 <= ind_56191)) Tmp1 = false; else {Tmp1 = (ind_56191 < nTiles_56142(grid_56190)); }result_56192 = Tmp1;
framePtr = F.prev;
return result_56192;
}
function getStateAt_56458(grid_56460, ind_56461) {

var result_56462 = 0;
var F={procname:"logic.getStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 171;
result_56462 = grid_56460.tileStates[chckIndx(ind_56461, 0, grid_56460.tileStates.length)-0];
framePtr = F.prev;
return result_56462;
}
function X5BX5D__56468(grid_56470, ind_56471) {

var result_56472 = 0;
var F={procname:"logic.[]",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 174;
result_56472 = getStateAt_56458(grid_56470, ind_56471);
framePtr = F.prev;
return result_56472;
}
function isEmptyAt_56498(grid_56500, ind_56501) {

var result_56502 = false;
var F={procname:"logic.isEmptyAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 183;
result_56502 = (X5BX5D__56468(grid_56500, ind_56501) == 0);
framePtr = F.prev;
return result_56502;
}
function isVoidAt_56538(grid_56540, ind_56541) {

var result_56542 = false;
var F={procname:"logic.isVoidAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 189;
result_56542 = (!(inside_56188(grid_56540, ind_56541)) || isEmptyAt_56498(grid_56540, ind_56541));
framePtr = F.prev;
return result_56542;
}
function newCoords_56137(x_56139, y_56140) {

var result_56141 = {x: 0, y: 0};
var F={procname:"logic.newCoords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 87;
result_56141.x = x_56139;
F.line = 88;
result_56141.y = y_56140;
framePtr = F.prev;
return result_56141;
}
function ind2Coords_56146(grid_56148, ind_56149) {

var result_56150 = {x: 0, y: 0};
var F={procname:"logic.ind2Coords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 92;
nimCopy(result_56150, newCoords_56137(modInt(ind_56149, grid_56148.width), divInt(ind_56149, grid_56148.width)), NTI56010);
framePtr = F.prev;
return result_56150;
}
function setStateAt_56478(grid_56480, ind_56481, newState_56482) {

var F={procname:"logic.setStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 177;
grid_56480.tileStates[chckIndx(ind_56481, 0, grid_56480.tileStates.length)-0] = newState_56482;
framePtr = F.prev;
}
function X5BX5Deq__56488(grid_56490, ind_56491, newState_56492) {

var F={procname:"logic.[]=",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
setStateAt_56478(grid_56490, ind_56491, newState_56492);
framePtr = F.prev;
}
function flipStateAt_56560(grid_56562, ind_56563) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
X5BX5Deq__56488(grid_56562, ind_56563, tileStates2Opposite_56548[chckIndx(X5BX5D__56468(grid_56562, ind_56563), 0, tileStates2Opposite_56548.length)-0]);
framePtr = F.prev;
}
function coords2Ind_56151(grid_56153, coords_56154) {

var result_56155 = 0;
var F={procname:"logic.coords2Ind",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 93;
result_56155 = addInt(coords_56154.x, mulInt(coords_56154.y, grid_56153.width));
framePtr = F.prev;
return result_56155;
}
function flipStateAt_56564(grid_56566, coords_56567) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipStateAt_56560(grid_56566, coords2Ind_56151(grid_56566, coords_56567));
framePtr = F.prev;
}
function dotdot__38470(a_38474, b_38476) {

var result_38478 = {a: 0, b: 0};
var F={procname:".....",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 274;
result_38478.a = a_38474;
F.line = 275;
result_38478.b = b_38476;
framePtr = F.prev;
return result_38478;
}
function plus__56259(p1_56261, p2_56262) {

var result_56263 = {x: 0, y: 0};
var F={procname:"logic.+",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 140;
nimCopy(result_56263, newCoords_56137(addInt(p1_56261.x, p2_56262.x), addInt(p1_56261.y, p2_56262.y)), NTI56010);
framePtr = F.prev;
return result_56263;
}
function inside_56193(grid_56195, coords_56196) {

var Tmp1;
var Tmp2;
var Tmp3;
var result_56197 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 105;
if (!(0 <= coords_56196.x)) Tmp3 = false; else {Tmp3 = (0 <= coords_56196.y); }if (!Tmp3) Tmp2 = false; else {Tmp2 = (coords_56196.x < grid_56195.width); }if (!Tmp2) Tmp1 = false; else {Tmp1 = (coords_56196.y < grid_56195.width); }result_56197 = Tmp1;
framePtr = F.prev;
return result_56197;
}
function flipWithNeighbors_56568(grid_56570, ind_56571) {

var F={procname:"logic.flipWithNeighbors",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 202;
var neighbor_56572 = {x: 0, y: 0};
F.line = 167;
var coords_56580 = ind2Coords_56146(grid_56570, ind_56571);
L2: do {
F.line = 168;
var neighbor_56582 = {x: 0, y: 0};
F.line = 162;
neighbor_56582 = coords_56580;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
L3: do {
F.line = 163;
var neighbor_56584 = {x: 0, y: 0};
L4: do {
F.line = 144;
var i_56586 = 0;
F.line = 2074;
var colontmp__56588 = {a: 0, b: 0};
F.line = 144;
colontmp__56588 = dotdot__38470(0, 5);
L5: do {
F.line = 2077;
var x_56590 = 0;
F.line = 1943;
var colontmp__56592 = 0;
F.line = 1943;
var colontmp__56594 = 0;
F.line = 2077;
colontmp__56592 = colontmp__56588.a;
F.line = 2077;
colontmp__56594 = colontmp__56588.b;
F.line = 1925;
var res_56596 = colontmp__56592;
L6: do {
F.line = 1926;
L7: while (true) {
if (!(res_56596 <= colontmp__56594)) break L7;
F.line = 1927;
x_56590 = res_56596;
F.line = 2078;
i_56586 = x_56590;
F.line = 145;
var dir_56601 = chckRange(i_56586, 0, 5);
F.line = 151;
var offset_56603 = nimCopy(null, directions2CoordsOffsets_56247[chckIndx(dir_56601, 0, directions2CoordsOffsets_56247.length)-0], NTI56010);
F.line = 152;
var neighCand_56605 = plus__56259(coords_56580, offset_56603);
if (inside_56193(grid_56570, neighCand_56605)) {
F.line = 154;
neighbor_56584 = neighCand_56605;
F.line = 164;
neighbor_56582 = neighbor_56584;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
}

res_56596 = addInt(res_56596, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function actionAt_56610(grid_56612, ind_56613) {

var result_56614 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
if (!(isVoidAt_56538(grid_56612, ind_56613))) {
flipWithNeighbors_56568(grid_56612, ind_56613);
F.line = 209;
result_56614 = true;
}

framePtr = F.prev;
return result_56614;
}
function actionAt_56615(grid_56617, coords_56618) {

var result_56619 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 210;
result_56619 = actionAt_56610(grid_56617, coords2Ind_56151(grid_56617, coords_56618));
framePtr = F.prev;
return result_56619;
}
function isRaisedAt_56518(grid_56520, ind_56521) {

var result_56522 = false;
var F={procname:"logic.isRaisedAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 186;
result_56522 = (X5BX5D__56468(grid_56520, ind_56521) == 2);
framePtr = F.prev;
return result_56522;
}
function isWin_56620(grid_56622) {

var result_56623 = false;
var F={procname:"logic.isWin",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 213;
result_56623 = true;
L1: do {
F.line = 214;
var ind_56624 = 0;
L2: do {
F.line = 96;
var i_56629 = 0;
F.line = 3714;
var colontmp__56631 = 0;
F.line = 96;
colontmp__56631 = nTiles_56142(grid_56622);
F.line = 3715;
var i_56633 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56633 < colontmp__56631)) break L4;
F.line = 3717;
i_56629 = i_56633;
F.line = 97;
ind_56624 = i_56629;
if ((!(isEmptyAt_56498(grid_56622, ind_56624)) && !(isRaisedAt_56518(grid_56622, ind_56624)))) {
F.line = 216;
result_56623 = false;
F.line = 217;
break BeforeRet;
}

i_56633 = addInt(i_56633, 1);
}
} while(false);
} while(false);
} while(false);
} while (false); 
framePtr = F.prev;
return result_56623;
}
function reset_57280(game_57282) {

var F={procname:"html5_game.reset",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 56;
game_57282.nMoves = 0;
F.line = 57;
game_57282.isWin = false;
randomize_56198(game_57282.grid);
framePtr = F.prev;
}
function logic_57357(game_57359) {

var F={procname:"html5_game.logic",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
if ((game_57359.inputs[4] != undefined)) {
if (!(game_57359.isWin)) {
F.line = 153;
var coords_57371 = screenPos2Coords_57297(game_57359, vector2d_43048(game_57359.currentMousePos.x, game_57359.currentMousePos.y));
if (actionAt_56615(game_57359.grid, coords_57371)) {
game_57359.nMoves = addInt(game_57359.nMoves, 1);
}

F.line = 156;
game_57359.isWin = isWin_56620(game_57359.grid);
}
else {
reset_57280(game_57359);
}

}

if ((game_57359.inputs[2] != undefined)) {
reset_57280(game_57359);
}

delete game_57359.inputs[4];
framePtr = F.prev;
}
function fillStyleeq__46289(ctx_46291, color_46292) {

var F={procname:"html5_canvas.fillStyle=",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/CanvasRenderingContext2D.nim",line:0};
framePtr = F;
F.line = 44;
ctx_46291.fillStyle=color_46292;framePtr = F.prev;
}
function rgb_46201(r_46203, g_46204, b_46205) {

var result_46206 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 8;
result_46206 = toJSStr((makeNimstrLit("rgb(").slice(0,-1)).concat(cstrToNimstr((r_46203)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((g_46204)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((b_46205)+"").slice(0,-1),makeNimstrLit(")")));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46206;
}
function coords2ScreenPos_57283(game_57285, coords_57286) {

var result_57287 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.coords2ScreenPos",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 96;
var c_57288 = point2d_43052(coords_57286.x, coords_57286.y);
F.line = 97;
var xform_57290 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57285.hexRadius))), move_43186(game_57285.topPos));
F.line = 98;
var p_57291 = amp__43952(c_57288, xform_57290);
F.line = 99;
result_57287.x = p_57291.x;
F.line = 100;
result_57287.y = p_57291.y;
framePtr = F.prev;
return result_57287;
}
function extractRGB_45237(a_45239) {

var result_45246 = {Field0: 0, Field1: 0, Field2: 0};
var F={procname:"colors.extractRGB",prev:framePtr,filename:"lib/pure/colors.nim",line:0};
framePtr = F;
F.line = 55;
result_45246.Field0 = (((a_45239 >>> 0) >>> 16) & 255);
F.line = 56;
result_45246.Field1 = (((a_45239 >>> 0) >>> 8) & 255);
F.line = 57;
result_45246.Field2 = (a_45239 & 255);
framePtr = F.prev;
return result_45246;
}
function rgb_46207(clr_46209) {

var result_46210 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 12;
var comp_46211 = extractRGB_45237(clr_46209);
F.line = 13;
result_46210 = rgb_46201(comp_46211.Field0, comp_46211.Field1, comp_46211.Field2);
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46210;
}
function newSeq_47023(len_47027) {

var result_47029 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_47029 = new Array(len_47027); for (var i=0;i<len_47027;++i) {result_47029[i]={x: 0.0, y: 0.0};}framePtr = F.prev;
return result_47029;
}
function degToRad_44436(deg_44438) {

var result_44439 = 0.0;
var F={procname:"basic2d.degToRad",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 850;
result_44439 = (deg_44438 / 5.7295779513082323e+01);
framePtr = F.prev;
return result_44439;
}
function plus__43986(p_43988, v_43989) {

var result_43990 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 718;
result_43990.x = (p_43988.x + v_43989.x);
F.line = 719;
result_43990.y = (p_43988.y + v_43989.y);
framePtr = F.prev;
return result_43990;
}
function polar_44062(p_44064, ang_44065, dist_44066) {

var result_44067 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.polar",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 753;
result_44067.x = (p_44064.x + (Math.cos(ang_44065) * dist_44066));
F.line = 754;
result_44067.y = (p_44064.y + (Math.sin(ang_44065) * dist_44066));
framePtr = F.prev;
return result_44067;
}
function genNGonPoints_47002(center_47004, radius_47005, n_47006, rotate_47007) {

var result_47009 = null;
var F={procname:"geometry.genNGonPoints",prev:framePtr,filename:"hexcapepkg/geometry.nim",line:0};
framePtr = F;
F.line = 5;
result_47009 = nimCopy(null, newSeq_47023(chckRange(n_47006, 0, 2147483647)), NTI47028);
L1: do {
F.line = 7;
var i_47057 = 0;
F.line = 3715;
var i_47064 = 0;
L2: do {
F.line = 3716;
L3: while (true) {
if (!(i_47064 < n_47006)) break L3;
F.line = 3717;
i_47057 = i_47064;
F.line = 8;
var startAngle_47058 = degToRad_44436(((i_47057 * (3.6000000000000000e+02 / n_47006)) + rotate_47007));
F.line = 9;
nimCopy(result_47009[chckIndx(i_47057, 0, result_47009.length)-0], plus__43986(polar_44062(ORIGO_43057, startAngle_47058, radius_47005), center_47004), NTI43021);
i_47064 = addInt(i_47064, 1);
}
} while(false);
} while(false);
framePtr = F.prev;
return result_47009;
}
function sysFatal_21421(message_21427) {

var F={procname:"sysFatal.sysFatal",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 2597;
var e_21429 = null;
e_21429 = {m_type: NTI3446, parent: null, name: null, message: null, trace: null};
F.line = 2599;
e_21429.message = nimCopy(null, message_21427, NTI138);
F.line = 2600;
raiseException(e_21429, "AssertionError");
framePtr = F.prev;
}
function raiseAssert_21416(msg_21418) {

var F={procname:"system.raiseAssert",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
sysFatal_21421(msg_21418);
framePtr = F.prev;
}
function failedAssertImpl_21439(msg_21441) {

var F={procname:"system.failedAssertImpl",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
raiseAssert_21416(msg_21441);
framePtr = F.prev;
}
function drawNGon_57007(ctx_57009, points_57011) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57009.beginPath();
ctx_57009.moveTo(points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].x, points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].y);
L1: do {
F.line = 17;
var p_57202 = {x: 0.0, y: 0.0};
F.line = 3523;
var i_57206 = 0;
F.line = 3524;
var L_57208 = (points_57011 != null ? points_57011.length : 0);
L2: do {
F.line = 3525;
L3: while (true) {
if (!(i_57206 < L_57208)) break L3;
F.line = 3526;
p_57202 = points_57011[chckIndx(i_57206, 0, points_57011.length)-0];
ctx_57009.lineTo(p_57202.x, p_57202.y);
i_57206 = addInt(i_57206, 1);
if (!(((points_57011 != null ? points_57011.length : 0) == L_57208))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
ctx_57009.closePath();
ctx_57009.fill();
framePtr = F.prev;
}
function drawNGon_57209(ctx_57211, center_57212, radius_57213, n_57214, rotate_57215) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 24;
var points_57216 = genNGonPoints_47002(center_57212, radius_57213, n_57214, rotate_57215);
drawNGon_57007(ctx_57211, points_57216);
framePtr = F.prev;
}
function plus__43598(a_43587, b_43589) {

var result_43600 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 121;
nimCopy(result_43600, vector2d_43048((a_43587.x + b_43589.x), (a_43587.y + b_43589.y)), NTI43023);
framePtr = F.prev;
return result_43600;
}
function drawHexGrid_57311(game_57313) {

var F={procname:"html5_game.drawHexGrid",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
L1: do {
F.line = 117;
var coords_57314 = {x: 0, y: 0};
F.line = 99;
var colontmp__57320 = null;
F.line = 117;
colontmp__57320 = game_57313.grid;
L2: do {
F.line = 100;
var i_57325 = 0;
L3: do {
F.line = 96;
var i_57327 = 0;
F.line = 3714;
var colontmp__57329 = 0;
F.line = 96;
colontmp__57329 = nTiles_56142(colontmp__57320);
F.line = 3715;
var i_57331 = 0;
L4: do {
F.line = 3716;
L5: while (true) {
if (!(i_57331 < colontmp__57329)) break L5;
F.line = 3717;
i_57327 = i_57331;
F.line = 97;
i_57325 = i_57327;
F.line = 101;
coords_57314 = ind2Coords_56146(colontmp__57320, i_57325);
L6: do {
F.line = 119;
var ind_57315 = coords2Ind_56151(game_57313.grid, coords_57314);
F.line = 120;
var currentCenter_57316 = coords2ScreenPos_57283(game_57313, coords_57314);
F.line = 121;
var color_57317 = tileStates2Colors_57217[chckIndx(getStateAt_56458(game_57313.grid, ind_57315), 0, tileStates2Colors_57217.length)-0];
if (isEmptyAt_56498(game_57313.grid, ind_57315)) {
F.line = 123;
break L6;
}

fillStyleeq__46289(game_57313.renderer, rgb_46207(0));
drawNGon_57209(game_57313.renderer, plus__43598(currentCenter_57316, vector2d_43048(2.0000000000000000e+00, 2.0000000000000000e+00)), game_57313.hexRadius, 6, 3.0000000000000000e+01);
fillStyleeq__46289(game_57313.renderer, color_57317);
drawNGon_57209(game_57313.renderer, currentCenter_57316, game_57313.hexRadius, 6, 3.0000000000000000e+01);
} while(false);
i_57331 = addInt(i_57331, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function renderText_57001(ctx_57003, text_57004, x_57005, y_57006) {

var F={procname:"html5_game.renderText",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57003.fillText(toJSStr(text_57004), x_57005, y_57006);
framePtr = F.prev;
}
function render_57336(game_57338) {

var F={procname:"html5_game.render",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
fillStyleeq__46289(game_57338.renderer, rgb_46201(110, 132, 174));
game_57338.renderer.fillRect(0.0, 0.0, 1.2800000000000000e+03, 7.2000000000000000e+02);
drawHexGrid_57311(game_57338);
F.line = 142;
game_57338.renderer.font = "16px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(0));
renderText_57001(game_57338.renderer, (makeNimstrLit("Moves: ").slice(0,-1)).concat(cstrToNimstr((game_57338.nMoves)+"")), 1.1800000000000000e+03, 6.0000000000000000e+01);
if (game_57338.isWin) {
F.line = 146;
game_57338.renderer.font = "48px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(16777215));
renderText_57001(game_57338.renderer, makeNimstrLit("Won!"), 1.1800000000000000e+03, 9.0000000000000000e+01);
}

framePtr = F.prev;
}
function loop_57517() {

var F={procname:"html5_game.loop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
logic_57357(game_57420[0]);
render_57336(game_57420[0]);
requestAnimationFrame(loop_57517);
framePtr = F.prev;
}
function main_57519() {

var F={procname:"html5_game.main",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
loop_57517();
framePtr = F.prev;
}
main_57519();
</script></body></html>
<html><body oncontextmenu=return false; style=margin: 0><script>
/* Generated by the Nim Compiler v0.16.1 */
/*   (c) 2017 Andreas Rumpf */

var framePtr = null;
var excHandler = 0;
var lastJSError = null;
if (typeof Int8Array === 'undefined') Int8Array = Array;
if (typeof Int16Array === 'undefined') Int16Array = Array;
if (typeof Int32Array === 'undefined') Int32Array = Array;
if (typeof Uint8Array === 'undefined') Uint8Array = Array;
if (typeof Uint16Array === 'undefined') Uint16Array = Array;
if (typeof Uint32Array === 'undefined') Uint32Array = Array;
if (typeof Float32Array === 'undefined') Float32Array = Array;
if (typeof Float64Array === 'undefined') Float64Array = Array;
var NTI3446 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI47028 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI57220 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56250 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56551 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56010 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI43021 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3454 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56004 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56043 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI56002 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56041 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI3458 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI124 = {size: 0,kind: 36,base: null,node: null,finalizer: null};
var NTI43023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3440 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI104 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI12609 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI3408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI138 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI140 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI3485 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI3424 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3438 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3442 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NNI3442 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3442.node = NNI3442;
var NNI3438 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3438.node = NNI3438;
NTI3485.base = NTI3424;
var NNI3424 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI3485, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI140, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI138, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI138, name: "trace", sons: null}]};
NTI3424.node = NNI3424;
var NNI3408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3408.node = NNI3408;
NTI3424.base = NTI3408;
NTI3438.base = NTI3424;
NTI3442.base = NTI3438;
var NNI12609 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI140, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI104, name: "Field1", sons: null}]};
NTI12609.node = NNI12609;
var NNI3440 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3440.node = NNI3440;
NTI3440.base = NTI3438;
var NNI43023 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43023.node = NNI43023;
var NNI3458 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3458.node = NNI3458;
NTI3458.base = NTI3424;
var NNI56002 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: [{kind: 1, offset: 0, typ: NTI56002, name: "tsEmpty", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56002, name: "tsCollapsed", len: 0, sons: null}, 
{kind: 1, offset: 2, typ: NTI56002, name: "tsRaised", len: 0, sons: null}]};
NTI56002.node = NNI56002;
NTI56041.base = NTI56002;
var NNI56004 = {kind: 2, offset: 0, typ: null, name: null, len: 2, sons: [{kind: 1, offset: 0, typ: NTI56004, name: "ttAllNeighbors", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56004, name: "ttLeftRight", len: 0, sons: null}]};
NTI56004.node = NNI56004;
NTI56043.base = NTI56004;
var NNI3454 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3454.node = NNI3454;
NTI3454.base = NTI3424;
var NNI43021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43021.node = NNI43021;
var NNI56010 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI104, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI104, name: "y", sons: null}]};
NTI56010.node = NNI56010;
NTI56551.base = NTI56002;
NTI56250.base = NTI56010;
NTI57220.base = NTI140;
NTI47028.base = NTI43021;
var NNI3446 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3446.node = NNI3446;
NTI3446.base = NTI3424;
function makeNimstrLit(c_13603) {

    var ln = c_13603.length;
    var result = new Array(ln + 1);
    var i = 0;
    for (; i < ln; ++i) {
      result[i] = c_13603.charCodeAt(i);
    }
    result[i] = 0; // terminating zero
    return result;
    }
function SetConstr() {

      var result = {};
      for (var i = 0; i < arguments.length; ++i) {
        var x = arguments[i];
        if (typeof(x) == "object") {
          for (var j = x[0]; j <= x[1]; ++j) {
            result[j] = true;
          }
        } else {
          result[x] = true;
        }
      }
      return result;
    }
function nimCopy(dest_18818, src_18819, ti_18820) {

var result_19229 = null;
switch (ti_18820.kind) {
case 21: case 22: case 23: case 5: if (!(isFatPointer_18801(ti_18820))) {
result_19229 = src_18819;
}
else {
result_19229 = [src_18819[0], src_18819[1]];}


break;
case 19:       if (dest_18818 === null || dest_18818 === undefined) {
        dest_18818 = {};
      }
      else {
        for (var key in dest_18818) { delete dest_18818[key]; }
      }
      for (var key in src_18819) { dest_18818[key] = src_18819[key]; }
      result_19229 = dest_18818;
    
break;
case 18: case 17: if (!((ti_18820.base == null))) {
result_19229 = nimCopy(dest_18818, src_18819, ti_18820.base);
}
else {
if ((ti_18820.kind == 17)) {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {m_type: ti_18820} : dest_18818;}
else {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {} : dest_18818;}
}
nimCopyAux(result_19229, src_18819, ti_18820.node);

break;
case 24: case 4: case 27: case 16:       if (src_18819 === null) {
        result_19229 = null;
      }
      else {
        if (dest_18818 === null || dest_18818 === undefined) {
          dest_18818 = new Array(src_18819.length);
        }
        else {
          dest_18818.length = src_18819.length;
        }
        result_19229 = dest_18818;
        for (var i = 0; i < src_18819.length; ++i) {
          result_19229[i] = nimCopy(result_19229[i], src_18819[i], ti_18820.base);
        }
      }
    
break;
case 28:       if (src_18819 !== null) {
        result_19229 = src_18819.slice(0);
      }
    
break;
default: 
result_19229 = src_18819;
break;
}
return result_19229;
}
function eqStrings(a_16203, b_16204) {

    if (a_16203 == b_16204) return true;
    if ((!a_16203) || (!b_16204)) return false;
    var alen = a_16203.length;
    if (alen != b_16204.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_16203[i] != b_16204[i]) return false;
    return true;
  }
function arrayConstr(len_19403, value_19404, typ_19405) {

      var result = new Array(len_19403);
      for (var i = 0; i < len_19403; ++i) result[i] = nimCopy(null, value_19404, typ_19405);
      return result;
    }
function cstrToNimstr(c_13803) {

  var ln = c_13803.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_13803.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else if((ch > 127) && (ch < 2048)) {
      result[r] = (ch >> 6) | 192;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    else {
      result[r] = (ch >> 12) | 224;
      ++r;
      result[r] = ((ch >> 6) & 63) | 128;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  result[r] = 0; // terminating zero
  return result;
  }
function toJSStr(s_14003) {

    var len = s_14003.length-1;
    var asciiPart = new Array(len);
    var fcc = String.fromCharCode;
    var nonAsciiPart = null;
    var nonAsciiOffset = 0;
    for (var i = 0; i < len; ++i) {
      if (nonAsciiPart !== null) {
        var offset = (i - nonAsciiOffset) * 2;
        var code = s_14003[i].toString(16);
        if (code.length == 1) {
          code = "0"+code;
        }
        nonAsciiPart[offset] = "%";
        nonAsciiPart[offset + 1] = code;
      }
      else if (s_14003[i] < 128)
        asciiPart[i] = fcc(s_14003[i]);
      else {
        asciiPart.length = i;
        nonAsciiOffset = i;
        nonAsciiPart = new Array((len - i) * 2);
        --i;
      }
    }
    asciiPart = asciiPart.join("");
    return (nonAsciiPart === null) ?
        asciiPart : asciiPart + decodeURIComponent(nonAsciiPart.join(""));
  }
function raiseException(e_13006, ename_13007) {

e_13006.name = ename_13007;
if ((excHandler == 0)) {
unhandledException(e_13006);
}

e_13006.trace = nimCopy(null, rawWriteStackTrace_12828(), NTI138);
throw e_13006;}
function mulInt(a_16803, b_16804) {

      var result = a_16803 * b_16804;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function chckRange(i_19415, a_19416, b_19417) {

var Tmp1;
var result_19418 = 0;
BeforeRet: do {
if (!(a_19416 <= i_19415)) Tmp1 = false; else {Tmp1 = (i_19415 <= b_19417); }if (Tmp1) {
result_19418 = i_19415;
break BeforeRet;
}
else {
raiseRangeError();
}

} while (false); 
return result_19418;
}
function chckIndx(i_19409, a_19410, b_19411) {

var Tmp1;
var result_19412 = 0;
BeforeRet: do {
if (!(a_19410 <= i_19409)) Tmp1 = false; else {Tmp1 = (i_19409 <= b_19411); }if (Tmp1) {
result_19412 = i_19409;
break BeforeRet;
}
else {
raiseIndexError();
}

} while (false); 
return result_19412;
}
function addInt(a_16460, b_16461) {

      var result = a_16460 + b_16461;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function modInt(a_17203, b_17204) {

      if (b_17204 == 0) raiseDivByZero();
      if (b_17204 == -1 && a_17203 == 2147483647) raiseOverflow();
      return Math.floor(a_17203 % b_17204);
    }
function divInt(a_17003, b_17004) {

      if (b_17004 == 0) raiseDivByZero();
      if (b_17004 == -1 && a_17003 == 2147483647) raiseOverflow();
      return Math.floor(a_17003 / b_17004);
    }
var tileStates2Opposite_56548 = nimCopy(null, [0, 2, 1], NTI56551);
var directions2CoordsOffsets_56247 = nimCopy(null, [{x: 0, y: 1}, {x: -1, y: 1}, {x: -1, y: 0}, {x: 0, y: -1}, {x: 1, y: -1}, {x: 1, y: 0}], NTI56250);
var tileStates2Colors_57217 = nimCopy(null, ["rgb(0,0,0)", "rgb(200,200,255)", "rgb(80,120,240)"], NTI57220);
function subInt(a_16603, b_16604) {

      var result = a_16603 - b_16604;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
var nimvm_5887 = false;
var nim_program_result = 0;
var globalRaiseHook_10614 = [null];
var localRaiseHook_10619 = [null];
var outOfMemHook_10622 = [null];
function isFatPointer_18801(ti_18803) {

var result_18804 = false;
BeforeRet: do {
result_18804 = !((SetConstr(17, 16, 4, 18, 27, 19, 23, 22, 21)[ti_18803.base.kind] != undefined));
break BeforeRet;
} while (false); 
return result_18804;
}
function nimCopyAux(dest_18823, src_18824, n_18826) {

switch (n_18826.kind) {
case 0: 
break;
case 1:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
    
break;
case 2: L1: do {
var i_19215 = 0;
var colontmp__19217 = 0;
colontmp__19217 = (n_18826.len - 1);
var res_19220 = 0;
L2: do {
L3: while (true) {
if (!(res_19220 <= colontmp__19217)) break L3;
i_19215 = res_19220;
nimCopyAux(dest_18823, src_18824, n_18826.sons[i_19215]);
res_19220 += 1;
}
} while(false);
} while(false);

break;
case 3:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
      for (var i = 0; i < n_18826.sons.length; ++i) {
        nimCopyAux(dest_18823, src_18824, n_18826.sons[i][1]);
      }
    
break;
}
}
function add_10638(x_10641, x_10641_Idx, y_10642) {

        var len = x_10641[0].length-1;
        for (var i = 0; i < y_10642.length; ++i) {
          x_10641[0][len] = y_10642.charCodeAt(i);
          ++len;
        }
        x_10641[0][len] = 0
      }
function auxWriteStackTrace_12604(f_12606) {

var Tmp3;
var result_12607 = [null];
var it_12615 = f_12606;
var i_12616 = 0;
var total_12617 = 0;
var tempFrames_12621 = arrayConstr(64, {Field0: null, Field1: 0}, NTI12609);
L1: do {
L2: while (true) {
if (!!((it_12615 == null))) Tmp3 = false; else {Tmp3 = (i_12616 <= 63); }if (!Tmp3) break L2;
tempFrames_12621[i_12616].Field0 = it_12615.procname;
tempFrames_12621[i_12616].Field1 = it_12615.line;
i_12616 += 1;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
L4: do {
L5: while (true) {
if (!!((it_12615 == null))) break L5;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
result_12607[0] = nimCopy(null, makeNimstrLit(""), NTI138);
if (!((total_12617 == i_12616))) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("(")); } else { result_12607[0] = makeNimstrLit("(");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr(((total_12617 - i_12616))+"")); } else { result_12607[0] = cstrToNimstr(((total_12617 - i_12616))+"");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(" calls omitted) ...\x0A")); } else { result_12607[0] = makeNimstrLit(" calls omitted) ...\x0A");};
}

L6: do {
var j_12815 = 0;
var colontmp__12821 = 0;
colontmp__12821 = (i_12616 - 1);
var res_12824 = colontmp__12821;
L7: do {
L8: while (true) {
if (!(0 <= res_12824)) break L8;
j_12815 = res_12824;
add_10638(result_12607, 0, tempFrames_12621[j_12815].Field0);
if ((0 < tempFrames_12621[j_12815].Field1)) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(", line: ")); } else { result_12607[0] = makeNimstrLit(", line: ");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr((tempFrames_12621[j_12815].Field1)+"")); } else { result_12607[0] = cstrToNimstr((tempFrames_12621[j_12815].Field1)+"");};
}

if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("\x0A")); } else { result_12607[0] = makeNimstrLit("\x0A");};
res_12824 -= 1;
}
} while(false);
} while(false);
return result_12607[0];
}
function rawWriteStackTrace_12828() {

var result_12830 = null;
if (!((framePtr == null))) {
result_12830 = nimCopy(null, (makeNimstrLit("Traceback (most recent call last)\x0A").slice(0,-1)).concat(auxWriteStackTrace_12604(framePtr)), NTI138);
}
else {
result_12830 = nimCopy(null, makeNimstrLit("No stack traceback available\x0A"), NTI138);
}

return result_12830;
}
function unhandledException(e_12854) {

var Tmp1;
var buf_12855 = /**/[makeNimstrLit("")];
if (!!(eqStrings(e_12854.message, null))) Tmp1 = false; else {Tmp1 = !((e_12854.message[0] == 0)); }if (Tmp1) {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception: ")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception: ");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(e_12854.message); } else { buf_12855[0] = e_12854.message;};
}
else {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception");};
}

if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit(" [")); } else { buf_12855[0] = makeNimstrLit(" [");};
add_10638(buf_12855, 0, e_12854.name);
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("]\x0A")); } else { buf_12855[0] = makeNimstrLit("]\x0A");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(rawWriteStackTrace_12828()); } else { buf_12855[0] = rawWriteStackTrace_12828();};
var cbuf_13001 = toJSStr(buf_12855[0]);
framePtr = null;
  if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_13001);
  }
  else {
    throw cbuf_13001;
  }
  }
function raiseOverflow() {

var e_13441 = null;
e_13441 = {m_type: NTI3442, parent: null, name: null, message: null, trace: null};
e_13441.message = nimCopy(null, makeNimstrLit("over- or underflow"), NTI138);
e_13441.parent = null;
raiseException(e_13441, "OverflowError");
}
function raiseDivByZero() {

var e_13459 = null;
e_13459 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
e_13459.message = nimCopy(null, makeNimstrLit("division by zero"), NTI138);
e_13459.parent = null;
raiseException(e_13459, "DivByZeroError");
}
var IDMATRIX_43056 = matrix2d_43040(1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, 0.0, 0.0);
var ORIGO_43057 = point2d_43052(0.0, 0.0);
var XAXIS_43058 = vector2d_43048(1.0000000000000000e+00, 0.0);
var YAXIS_43059 = vector2d_43048(0.0, 1.0000000000000000e+00);
var state_49605 = /**/[{a0: 1773455756, a1: 4275166512}];
function getTime_52042() {

var result_52413 = null;
var F={procname:"times.getTime",prev:framePtr,filename:"lib/pure/times.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 586;
result_52413 = new Date();
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_52413;
}
var startMilsecs_52448 = /**/[getTime_52042()];
function getContext2D_46713(c_46715) {

var result_46716 = null;
var F={procname:"html5_canvas.getContext2D",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/html5_canvas.nim",line:0};
framePtr = F;
F.line = 24;
result_46716=c_46715.getContext('2d');framePtr = F.prev;
return result_46716;
}
function vector2d_43048(x_43050, y_43051) {

var result_43317 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.vector2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 337;
result_43317.x = x_43050;
F.line = 338;
result_43317.y = y_43051;
framePtr = F.prev;
return result_43317;
}
function slash__20607(x_20609, y_20610) {

var result_20611 = 0.0;
var F={procname:"system./",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 3268;
result_20611 = (x_20609 / y_20610);
framePtr = F.prev;
return result_20611;
}
function newSeq_56072(len_56076) {

var result_56078 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56078 = new Array(len_56076); for (var i=0;i<len_56076;++i) {result_56078[i]=0;}framePtr = F.prev;
return result_56078;
}
function raiseRangeError() {

var e_13477 = null;
e_13477 = {m_type: NTI3458, parent: null, name: null, message: null, trace: null};
e_13477.message = nimCopy(null, makeNimstrLit("value out of range"), NTI138);
e_13477.parent = null;
raiseException(e_13477, "RangeError");
}
function newSeq_56111(len_56115) {

var result_56117 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56117 = new Array(len_56115); for (var i=0;i<len_56115;++i) {result_56117[i]=0;}framePtr = F.prev;
return result_56117;
}
function newHexGrid_56038(width_56040, tileStates_56042, tileTypes_56044) {

var result_56045 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56045 = {width: 0, tileStates: null, tileTypes: null};
F.line = 75;
result_56045.width = width_56040;
F.line = 76;
result_56045.tileStates = nimCopy(null, tileStates_56042, NTI56041);
F.line = 77;
result_56045.tileTypes = nimCopy(null, tileTypes_56044, NTI56043);
framePtr = F.prev;
return result_56045;
}
function newHexGrid_56054(width_56056) {

var result_56057 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 80;
F.line = 81;
var nTiles_56058 = mulInt(width_56056, width_56056);
F.line = 82;
var states_56097 = newSeq_56072(chckRange(nTiles_56058, 0, 2147483647));
F.line = 83;
var types_56136 = newSeq_56111(chckRange(nTiles_56058, 0, 2147483647));
result_56057 = newHexGrid_56038(width_56056, states_56097, types_56136);
framePtr = F.prev;
return result_56057;
}
function nTiles_56142(grid_56144) {

var result_56145 = 0;
var F={procname:"logic.nTiles",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 90;
result_56145 = mulInt(grid_56144.width, grid_56144.width);
framePtr = F.prev;
return result_56145;
}
function raiseIndexError() {

var e_13495 = null;
e_13495 = {m_type: NTI3454, parent: null, name: null, message: null, trace: null};
e_13495.message = nimCopy(null, makeNimstrLit("index out of bounds"), NTI138);
e_13495.parent = null;
raiseException(e_13495, "IndexError");
}
function rotl_49802(x_49804, k_49805) {

var result_49806 = 0;
var F={procname:"random.rotl",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 44;
result_49806 = ((x_49804 << k_49805) | ((x_49804 >>> 0) >>> ((64 - k_49805) >>> 0)));
framePtr = F.prev;
return result_49806;
}
function next_49846(s_49849) {

var result_49850 = 0;
var F={procname:"random.next",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 47;
var s0_49851 = s_49849.a0;
F.line = 48;
var s1_49852 = s_49849.a1;
F.line = 49;
result_49850 = ((s0_49851 + s1_49852) >>> 0);
F.line = 50;
s1_49852 = (s1_49852 ^ s0_49851);
F.line = 51;
s_49849.a0 = ((rotl_49802(s0_49851, 55) ^ s1_49852) ^ (s1_49852 << 14));
F.line = 52;
s_49849.a1 = rotl_49802(s1_49852, 36);
framePtr = F.prev;
return result_49850;
}
function random_50282(max_50284) {

var result_50285 = 0;
var F={procname:"random.random",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
BeforeRet: do {
L1: do {
F.line = 79;
L2: while (true) {
if (!true) break L2;
F.line = 80;
var x_50287 = next_49846(state_49605[0]);
if ((x_50287 < ((4294967295 - (4294967295 % chckRange(max_50284, 0, 4294967295))) >>> 0))) {
F.line = 82;
result_50285 = ((x_50287 % max_50284)|0);
break BeforeRet;
}

}
} while(false);
} while (false); 
framePtr = F.prev;
return result_50285;
}
function randomize_56198(grid_56200) {

var F={procname:"logic.randomize",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 108;
var i_56201 = 0;
L2: do {
F.line = 96;
var i_56208 = 0;
F.line = 3714;
var colontmp__56210 = 0;
F.line = 96;
colontmp__56210 = nTiles_56142(grid_56200);
F.line = 3715;
var i_56212 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56212 < colontmp__56210)) break L4;
F.line = 3717;
i_56208 = i_56212;
F.line = 97;
i_56201 = i_56208;
F.line = 109;
grid_56200.tileStates[chckIndx(i_56201, 0, grid_56200.tileStates.length)-0] = chckRange(random_50282(3), 0, 2);
i_56212 = addInt(i_56212, 1);
}
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function newGame_57265(renderer_57267) {

var result_57268 = null;
var F={procname:"html5_game.newGame",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
result_57268 = {renderer: null, pressedMousePos: {x: 0.0, y: 0.0}, currentMousePos: {x: 0.0, y: 0.0}, inputs: {}, grid: null, topPos: {x: 0.0, y: 0.0}, hexRadius: 0.0, nMoves: 0, isWin: false};
F.line = 49;
result_57268.renderer = renderer_57267;
F.line = 50;
nimCopy(result_57268.topPos, vector2d_43048(slash__20607(1280, 2), 5.0000000000000000e+01), NTI43023);
F.line = 51;
result_57268.hexRadius = 3.0000000000000000e+01;
F.line = 52;
result_57268.grid = newHexGrid_56054(5);
randomize_56198(result_57268.grid);
framePtr = F.prev;
return result_57268;
}
var Tmp1;
var canvasId_57408 = /**/[makeNimstrLit("canvas")];
var old_57409 = /**/[document.getElementById(toJSStr(canvasId_57408[0]))];
if (!((old_57409[0] === null))) {
Tmp1 = old_57409[0];
}
else {
Tmp1 = document.createElement(toJSStr(canvasId_57408[0]));
}

var canvas_57418 = /**/[Tmp1];
var ctx_57419 = /**/[getContext2D_46713(canvas_57418[0])];
var game_57420 = /**/[newGame_57265(ctx_57419[0])];
function offsetLeft_57421(el_57423) {

var result_57424 = 0.0;
var F={procname:"html5_game.offsetLeft",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 174;
el_57423.offsetLeft;framePtr = F.prev;
return result_57424;
}
function offsetTop_57425(el_57427) {

var result_57428 = 0.0;
var F={procname:"html5_game.offsetTop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 175;
el_57427.offsetTop;framePtr = F.prev;
return result_57428;
}
function relative_57432(ev_57434) {

var result_57435 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.relative",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 183;
var x_57436 = ev_57434.x;
F.line = 184;
var y_57437 = ev_57434.y;
F.line = 185;
var ol_57438 = offsetLeft_57421(ev_57434.target);
F.line = 186;
var ot_57439 = offsetTop_57425(ev_57434.target);
F.line = 187;
result_57435.x = (x_57436 - ol_57438);
F.line = 188;
result_57435.y = (y_57437 - ot_57439);
framePtr = F.prev;
return result_57435;
}
function stopPropagation_57442(ev_57444) {

var F={procname:"html5_game.stopPropagation",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 190;
ev_57444.stopPropagation();framePtr = F.prev;
}
function colonanonymous__57445(ev_57447) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 193;
nimCopy(game_57420[0].pressedMousePos, relative_57432(ev_57447), NTI43021);
game_57420[0].inputs[3] = true;
if ((ev_57447.button == 2)) {
game_57420[0].inputs[2] = true;
}

stopPropagation_57442(ev_57447);
framePtr = F.prev;
}
canvas_57418[0].onmousedown = colonanonymous__57445;
function colonanonymous__57470(ev_57472) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
delete game_57420[0].inputs[3];
game_57420[0].inputs[4] = true;
if ((ev_57472.button == 2)) {
delete game_57420[0].inputs[2];
}

stopPropagation_57442(ev_57472);
framePtr = F.prev;
}
canvas_57418[0].onmouseup = colonanonymous__57470;
function colonanonymous__57506(ev_57508) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 207;
nimCopy(game_57420[0].currentMousePos, relative_57432(ev_57508), NTI43021);
framePtr = F.prev;
}
canvas_57418[0].onmousemove = colonanonymous__57506;
canvas_57418[0].width = 1280;
canvas_57418[0].height = 720;
if ((old_57409[0] === null)) {
document.body.appendChild(canvas_57418[0]);
}

function setElements_43114(t_43117, ax_43118, ay_43119, bx_43120, by_43121, tx_43122, ty_43123) {

var F={procname:"basic2d.setElements",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 137;
t_43117.ax = ax_43118;
F.line = 138;
t_43117.ay = ay_43119;
F.line = 139;
t_43117.bx = bx_43120;
F.line = 140;
t_43117.by = by_43121;
F.line = 141;
t_43117.tx = tx_43122;
F.line = 142;
t_43117.ty = ty_43123;
framePtr = F.prev;
}
function amp__43134(a_43136, b_43137) {

var result_43138 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43138[0], ((a_43136.ax * b_43137.ax) + (a_43136.ay * b_43137.bx)), ((a_43136.ax * b_43137.ay) + (a_43136.ay * b_43137.by)), ((a_43136.bx * b_43137.ax) + (a_43136.by * b_43137.bx)), ((a_43136.bx * b_43137.ay) + (a_43136.by * b_43137.by)), (((a_43136.tx * b_43137.ax) + (a_43136.ty * b_43137.bx)) + b_43137.tx), (((a_43136.tx * b_43137.ay) + (a_43136.ty * b_43137.by)) + b_43137.ty));
framePtr = F.prev;
return result_43138[0];
}
function matrix2d_43040(ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047) {

var result_43132 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.matrix2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43132[0], ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047);
framePtr = F.prev;
return result_43132[0];
}
function scale_43140(s_43142) {

var result_43143 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.scale",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43143[0], s_43142, 0.0, 0.0, s_43142, 0.0, 0.0);
framePtr = F.prev;
return result_43143[0];
}
function move_43186(v_43188) {

var result_43189 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.move",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43189[0], 1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, v_43188.x, v_43188.y);
framePtr = F.prev;
return result_43189[0];
}
function determinant_43258(t_43260) {

var result_43261 = 0.0;
var F={procname:"basic2d.determinant",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 277;
result_43261 = ((t_43260.ax * t_43260.by) - (t_43260.bx * t_43260.ay));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_43261;
}
function inverse_43266(m_43268) {

var result_43269 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.inverse",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 288;
var d_43270 = determinant_43258(m_43268);
if ((d_43270 == 0.0)) {
F.line = 290;
F.line = 2577;
var e_43277 = null;
e_43277 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
F.line = 2579;
e_43277.message = nimCopy(null, makeNimstrLit("Cannot invert a zero determinant matrix"), NTI138);
F.line = 2580;
e_43277.parent = null;
raiseException(e_43277, "DivByZeroError");
}

setElements_43114(result_43269[0], (m_43268.by / d_43270), (-(m_43268.ay) / d_43270), (-(m_43268.bx) / d_43270), (m_43268.ax / d_43270), (((m_43268.bx * m_43268.ty) - (m_43268.by * m_43268.tx)) / d_43270), (((m_43268.ay * m_43268.tx) - (m_43268.ax * m_43268.ty)) / d_43270));
framePtr = F.prev;
return result_43269[0];
}
function amp__43952(p_43954, t_43955) {

var result_43956 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 688;
result_43956.x = (((p_43954.x * t_43955.ax) + (p_43954.y * t_43955.bx)) + t_43955.tx);
F.line = 689;
result_43956.y = (((p_43954.x * t_43955.ay) + (p_43954.y * t_43955.by)) + t_43955.ty);
framePtr = F.prev;
return result_43956;
}
function point2d_43052(x_43054, y_43055) {

var result_43916 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.point2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 654;
result_43916.x = x_43054;
F.line = 655;
result_43916.y = y_43055;
framePtr = F.prev;
return result_43916;
}
function screenPos2Coords_57297(game_57299, pos_57300) {

var result_57301 = {x: 0, y: 0};
var F={procname:"html5_game.screenPos2Coords",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 109;
var xform_inv_57303 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57299.hexRadius))), move_43186(game_57299.topPos));
F.line = 110;
var xform_57304 = inverse_43266(xform_inv_57303);
F.line = 111;
var proj_57305 = amp__43952(point2d_43052(pos_57300.x, pos_57300.y), xform_57304);
F.line = 113;
result_57301.x = ((proj_57305.x + 5.0000000000000000e-01)|0);
F.line = 114;
result_57301.y = ((proj_57305.y + 5.0000000000000000e-01)|0);
framePtr = F.prev;
return result_57301;
}
function inside_56188(grid_56190, ind_56191) {

var Tmp1;
var result_56192 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 103;
if (!(0 <= ind_56191)) Tmp1 = false; else {Tmp1 = (ind_56191 < nTiles_56142(grid_56190)); }result_56192 = Tmp1;
framePtr = F.prev;
return result_56192;
}
function getStateAt_56458(grid_56460, ind_56461) {

var result_56462 = 0;
var F={procname:"logic.getStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 171;
result_56462 = grid_56460.tileStates[chckIndx(ind_56461, 0, grid_56460.tileStates.length)-0];
framePtr = F.prev;
return result_56462;
}
function X5BX5D__56468(grid_56470, ind_56471) {

var result_56472 = 0;
var F={procname:"logic.[]",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 174;
result_56472 = getStateAt_56458(grid_56470, ind_56471);
framePtr = F.prev;
return result_56472;
}
function isEmptyAt_56498(grid_56500, ind_56501) {

var result_56502 = false;
var F={procname:"logic.isEmptyAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 183;
result_56502 = (X5BX5D__56468(grid_56500, ind_56501) == 0);
framePtr = F.prev;
return result_56502;
}
function isVoidAt_56538(grid_56540, ind_56541) {

var result_56542 = false;
var F={procname:"logic.isVoidAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 189;
result_56542 = (!(inside_56188(grid_56540, ind_56541)) || isEmptyAt_56498(grid_56540, ind_56541));
framePtr = F.prev;
return result_56542;
}
function newCoords_56137(x_56139, y_56140) {

var result_56141 = {x: 0, y: 0};
var F={procname:"logic.newCoords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 87;
result_56141.x = x_56139;
F.line = 88;
result_56141.y = y_56140;
framePtr = F.prev;
return result_56141;
}
function ind2Coords_56146(grid_56148, ind_56149) {

var result_56150 = {x: 0, y: 0};
var F={procname:"logic.ind2Coords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 92;
nimCopy(result_56150, newCoords_56137(modInt(ind_56149, grid_56148.width), divInt(ind_56149, grid_56148.width)), NTI56010);
framePtr = F.prev;
return result_56150;
}
function setStateAt_56478(grid_56480, ind_56481, newState_56482) {

var F={procname:"logic.setStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 177;
grid_56480.tileStates[chckIndx(ind_56481, 0, grid_56480.tileStates.length)-0] = newState_56482;
framePtr = F.prev;
}
function X5BX5Deq__56488(grid_56490, ind_56491, newState_56492) {

var F={procname:"logic.[]=",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
setStateAt_56478(grid_56490, ind_56491, newState_56492);
framePtr = F.prev;
}
function flipStateAt_56560(grid_56562, ind_56563) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
X5BX5Deq__56488(grid_56562, ind_56563, tileStates2Opposite_56548[chckIndx(X5BX5D__56468(grid_56562, ind_56563), 0, tileStates2Opposite_56548.length)-0]);
framePtr = F.prev;
}
function coords2Ind_56151(grid_56153, coords_56154) {

var result_56155 = 0;
var F={procname:"logic.coords2Ind",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 93;
result_56155 = addInt(coords_56154.x, mulInt(coords_56154.y, grid_56153.width));
framePtr = F.prev;
return result_56155;
}
function flipStateAt_56564(grid_56566, coords_56567) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipStateAt_56560(grid_56566, coords2Ind_56151(grid_56566, coords_56567));
framePtr = F.prev;
}
function dotdot__38470(a_38474, b_38476) {

var result_38478 = {a: 0, b: 0};
var F={procname:".....",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 274;
result_38478.a = a_38474;
F.line = 275;
result_38478.b = b_38476;
framePtr = F.prev;
return result_38478;
}
function plus__56259(p1_56261, p2_56262) {

var result_56263 = {x: 0, y: 0};
var F={procname:"logic.+",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 140;
nimCopy(result_56263, newCoords_56137(addInt(p1_56261.x, p2_56262.x), addInt(p1_56261.y, p2_56262.y)), NTI56010);
framePtr = F.prev;
return result_56263;
}
function inside_56193(grid_56195, coords_56196) {

var Tmp1;
var Tmp2;
var Tmp3;
var result_56197 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 105;
if (!(0 <= coords_56196.x)) Tmp3 = false; else {Tmp3 = (0 <= coords_56196.y); }if (!Tmp3) Tmp2 = false; else {Tmp2 = (coords_56196.x < grid_56195.width); }if (!Tmp2) Tmp1 = false; else {Tmp1 = (coords_56196.y < grid_56195.width); }result_56197 = Tmp1;
framePtr = F.prev;
return result_56197;
}
function flipWithNeighbors_56568(grid_56570, ind_56571) {

var F={procname:"logic.flipWithNeighbors",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 202;
var neighbor_56572 = {x: 0, y: 0};
F.line = 167;
var coords_56580 = ind2Coords_56146(grid_56570, ind_56571);
L2: do {
F.line = 168;
var neighbor_56582 = {x: 0, y: 0};
F.line = 162;
neighbor_56582 = coords_56580;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
L3: do {
F.line = 163;
var neighbor_56584 = {x: 0, y: 0};
L4: do {
F.line = 144;
var i_56586 = 0;
F.line = 2074;
var colontmp__56588 = {a: 0, b: 0};
F.line = 144;
colontmp__56588 = dotdot__38470(0, 5);
L5: do {
F.line = 2077;
var x_56590 = 0;
F.line = 1943;
var colontmp__56592 = 0;
F.line = 1943;
var colontmp__56594 = 0;
F.line = 2077;
colontmp__56592 = colontmp__56588.a;
F.line = 2077;
colontmp__56594 = colontmp__56588.b;
F.line = 1925;
var res_56596 = colontmp__56592;
L6: do {
F.line = 1926;
L7: while (true) {
if (!(res_56596 <= colontmp__56594)) break L7;
F.line = 1927;
x_56590 = res_56596;
F.line = 2078;
i_56586 = x_56590;
F.line = 145;
var dir_56601 = chckRange(i_56586, 0, 5);
F.line = 151;
var offset_56603 = nimCopy(null, directions2CoordsOffsets_56247[chckIndx(dir_56601, 0, directions2CoordsOffsets_56247.length)-0], NTI56010);
F.line = 152;
var neighCand_56605 = plus__56259(coords_56580, offset_56603);
if (inside_56193(grid_56570, neighCand_56605)) {
F.line = 154;
neighbor_56584 = neighCand_56605;
F.line = 164;
neighbor_56582 = neighbor_56584;
F.line = 169;
neighbor_56572 = neighbor_56582;
flipStateAt_56564(grid_56570, neighbor_56572);
}

res_56596 = addInt(res_56596, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function actionAt_56610(grid_56612, ind_56613) {

var result_56614 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
if (!(isVoidAt_56538(grid_56612, ind_56613))) {
flipWithNeighbors_56568(grid_56612, ind_56613);
F.line = 209;
result_56614 = true;
}

framePtr = F.prev;
return result_56614;
}
function actionAt_56615(grid_56617, coords_56618) {

var result_56619 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 210;
result_56619 = actionAt_56610(grid_56617, coords2Ind_56151(grid_56617, coords_56618));
framePtr = F.prev;
return result_56619;
}
function isRaisedAt_56518(grid_56520, ind_56521) {

var result_56522 = false;
var F={procname:"logic.isRaisedAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 186;
result_56522 = (X5BX5D__56468(grid_56520, ind_56521) == 2);
framePtr = F.prev;
return result_56522;
}
function isWin_56620(grid_56622) {

var result_56623 = false;
var F={procname:"logic.isWin",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 213;
result_56623 = true;
L1: do {
F.line = 214;
var ind_56624 = 0;
L2: do {
F.line = 96;
var i_56629 = 0;
F.line = 3714;
var colontmp__56631 = 0;
F.line = 96;
colontmp__56631 = nTiles_56142(grid_56622);
F.line = 3715;
var i_56633 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56633 < colontmp__56631)) break L4;
F.line = 3717;
i_56629 = i_56633;
F.line = 97;
ind_56624 = i_56629;
if ((!(isEmptyAt_56498(grid_56622, ind_56624)) && !(isRaisedAt_56518(grid_56622, ind_56624)))) {
F.line = 216;
result_56623 = false;
F.line = 217;
break BeforeRet;
}

i_56633 = addInt(i_56633, 1);
}
} while(false);
} while(false);
} while(false);
} while (false); 
framePtr = F.prev;
return result_56623;
}
function reset_57280(game_57282) {

var F={procname:"html5_game.reset",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 56;
game_57282.nMoves = 0;
F.line = 57;
game_57282.isWin = false;
randomize_56198(game_57282.grid);
framePtr = F.prev;
}
function logic_57357(game_57359) {

var F={procname:"html5_game.logic",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
if ((game_57359.inputs[4] != undefined)) {
if (!(game_57359.isWin)) {
F.line = 153;
var coords_57371 = screenPos2Coords_57297(game_57359, vector2d_43048(game_57359.currentMousePos.x, game_57359.currentMousePos.y));
if (actionAt_56615(game_57359.grid, coords_57371)) {
game_57359.nMoves = addInt(game_57359.nMoves, 1);
}

F.line = 156;
game_57359.isWin = isWin_56620(game_57359.grid);
}
else {
reset_57280(game_57359);
}

}

if ((game_57359.inputs[2] != undefined)) {
reset_57280(game_57359);
}

delete game_57359.inputs[4];
framePtr = F.prev;
}
function fillStyleeq__46289(ctx_46291, color_46292) {

var F={procname:"html5_canvas.fillStyle=",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/CanvasRenderingContext2D.nim",line:0};
framePtr = F;
F.line = 44;
ctx_46291.fillStyle=color_46292;framePtr = F.prev;
}
function rgb_46201(r_46203, g_46204, b_46205) {

var result_46206 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 8;
result_46206 = toJSStr((makeNimstrLit("rgb(").slice(0,-1)).concat(cstrToNimstr((r_46203)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((g_46204)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((b_46205)+"").slice(0,-1),makeNimstrLit(")")));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46206;
}
function coords2ScreenPos_57283(game_57285, coords_57286) {

var result_57287 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.coords2ScreenPos",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 96;
var c_57288 = point2d_43052(coords_57286.x, coords_57286.y);
F.line = 97;
var xform_57290 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_57285.hexRadius))), move_43186(game_57285.topPos));
F.line = 98;
var p_57291 = amp__43952(c_57288, xform_57290);
F.line = 99;
result_57287.x = p_57291.x;
F.line = 100;
result_57287.y = p_57291.y;
framePtr = F.prev;
return result_57287;
}
function extractRGB_45237(a_45239) {

var result_45246 = {Field0: 0, Field1: 0, Field2: 0};
var F={procname:"colors.extractRGB",prev:framePtr,filename:"lib/pure/colors.nim",line:0};
framePtr = F;
F.line = 55;
result_45246.Field0 = (((a_45239 >>> 0) >>> 16) & 255);
F.line = 56;
result_45246.Field1 = (((a_45239 >>> 0) >>> 8) & 255);
F.line = 57;
result_45246.Field2 = (a_45239 & 255);
framePtr = F.prev;
return result_45246;
}
function rgb_46207(clr_46209) {

var result_46210 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 12;
var comp_46211 = extractRGB_45237(clr_46209);
F.line = 13;
result_46210 = rgb_46201(comp_46211.Field0, comp_46211.Field1, comp_46211.Field2);
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46210;
}
function newSeq_47023(len_47027) {

var result_47029 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_47029 = new Array(len_47027); for (var i=0;i<len_47027;++i) {result_47029[i]={x: 0.0, y: 0.0};}framePtr = F.prev;
return result_47029;
}
function degToRad_44436(deg_44438) {

var result_44439 = 0.0;
var F={procname:"basic2d.degToRad",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 850;
result_44439 = (deg_44438 / 5.7295779513082323e+01);
framePtr = F.prev;
return result_44439;
}
function plus__43986(p_43988, v_43989) {

var result_43990 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 718;
result_43990.x = (p_43988.x + v_43989.x);
F.line = 719;
result_43990.y = (p_43988.y + v_43989.y);
framePtr = F.prev;
return result_43990;
}
function polar_44062(p_44064, ang_44065, dist_44066) {

var result_44067 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.polar",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 753;
result_44067.x = (p_44064.x + (Math.cos(ang_44065) * dist_44066));
F.line = 754;
result_44067.y = (p_44064.y + (Math.sin(ang_44065) * dist_44066));
framePtr = F.prev;
return result_44067;
}
function genNGonPoints_47002(center_47004, radius_47005, n_47006, rotate_47007) {

var result_47009 = null;
var F={procname:"geometry.genNGonPoints",prev:framePtr,filename:"hexcapepkg/geometry.nim",line:0};
framePtr = F;
F.line = 5;
result_47009 = nimCopy(null, newSeq_47023(chckRange(n_47006, 0, 2147483647)), NTI47028);
L1: do {
F.line = 7;
var i_47057 = 0;
F.line = 3715;
var i_47064 = 0;
L2: do {
F.line = 3716;
L3: while (true) {
if (!(i_47064 < n_47006)) break L3;
F.line = 3717;
i_47057 = i_47064;
F.line = 8;
var startAngle_47058 = degToRad_44436(((i_47057 * (3.6000000000000000e+02 / n_47006)) + rotate_47007));
F.line = 9;
nimCopy(result_47009[chckIndx(i_47057, 0, result_47009.length)-0], plus__43986(polar_44062(ORIGO_43057, startAngle_47058, radius_47005), center_47004), NTI43021);
i_47064 = addInt(i_47064, 1);
}
} while(false);
} while(false);
framePtr = F.prev;
return result_47009;
}
function sysFatal_21421(message_21427) {

var F={procname:"sysFatal.sysFatal",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 2597;
var e_21429 = null;
e_21429 = {m_type: NTI3446, parent: null, name: null, message: null, trace: null};
F.line = 2599;
e_21429.message = nimCopy(null, message_21427, NTI138);
F.line = 2600;
raiseException(e_21429, "AssertionError");
framePtr = F.prev;
}
function raiseAssert_21416(msg_21418) {

var F={procname:"system.raiseAssert",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
sysFatal_21421(msg_21418);
framePtr = F.prev;
}
function failedAssertImpl_21439(msg_21441) {

var F={procname:"system.failedAssertImpl",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
raiseAssert_21416(msg_21441);
framePtr = F.prev;
}
function drawNGon_57007(ctx_57009, points_57011) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57009.beginPath();
ctx_57009.moveTo(points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].x, points_57011[chckIndx(subInt((points_57011 != null ? points_57011.length : 0), 1), 0, points_57011.length)-0].y);
L1: do {
F.line = 17;
var p_57202 = {x: 0.0, y: 0.0};
F.line = 3523;
var i_57206 = 0;
F.line = 3524;
var L_57208 = (points_57011 != null ? points_57011.length : 0);
L2: do {
F.line = 3525;
L3: while (true) {
if (!(i_57206 < L_57208)) break L3;
F.line = 3526;
p_57202 = points_57011[chckIndx(i_57206, 0, points_57011.length)-0];
ctx_57009.lineTo(p_57202.x, p_57202.y);
i_57206 = addInt(i_57206, 1);
if (!(((points_57011 != null ? points_57011.length : 0) == L_57208))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
ctx_57009.closePath();
ctx_57009.fill();
framePtr = F.prev;
}
function drawNGon_57209(ctx_57211, center_57212, radius_57213, n_57214, rotate_57215) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 24;
var points_57216 = genNGonPoints_47002(center_57212, radius_57213, n_57214, rotate_57215);
drawNGon_57007(ctx_57211, points_57216);
framePtr = F.prev;
}
function plus__43598(a_43587, b_43589) {

var result_43600 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 121;
nimCopy(result_43600, vector2d_43048((a_43587.x + b_43589.x), (a_43587.y + b_43589.y)), NTI43023);
framePtr = F.prev;
return result_43600;
}
function drawHexGrid_57311(game_57313) {

var F={procname:"html5_game.drawHexGrid",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
L1: do {
F.line = 117;
var coords_57314 = {x: 0, y: 0};
F.line = 99;
var colontmp__57320 = null;
F.line = 117;
colontmp__57320 = game_57313.grid;
L2: do {
F.line = 100;
var i_57325 = 0;
L3: do {
F.line = 96;
var i_57327 = 0;
F.line = 3714;
var colontmp__57329 = 0;
F.line = 96;
colontmp__57329 = nTiles_56142(colontmp__57320);
F.line = 3715;
var i_57331 = 0;
L4: do {
F.line = 3716;
L5: while (true) {
if (!(i_57331 < colontmp__57329)) break L5;
F.line = 3717;
i_57327 = i_57331;
F.line = 97;
i_57325 = i_57327;
F.line = 101;
coords_57314 = ind2Coords_56146(colontmp__57320, i_57325);
L6: do {
F.line = 119;
var ind_57315 = coords2Ind_56151(game_57313.grid, coords_57314);
F.line = 120;
var currentCenter_57316 = coords2ScreenPos_57283(game_57313, coords_57314);
F.line = 121;
var color_57317 = tileStates2Colors_57217[chckIndx(getStateAt_56458(game_57313.grid, ind_57315), 0, tileStates2Colors_57217.length)-0];
if (isEmptyAt_56498(game_57313.grid, ind_57315)) {
F.line = 123;
break L6;
}

fillStyleeq__46289(game_57313.renderer, rgb_46207(0));
drawNGon_57209(game_57313.renderer, plus__43598(currentCenter_57316, vector2d_43048(2.0000000000000000e+00, 2.0000000000000000e+00)), game_57313.hexRadius, 6, 3.0000000000000000e+01);
fillStyleeq__46289(game_57313.renderer, color_57317);
drawNGon_57209(game_57313.renderer, currentCenter_57316, game_57313.hexRadius, 6, 3.0000000000000000e+01);
} while(false);
i_57331 = addInt(i_57331, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function renderText_57001(ctx_57003, text_57004, x_57005, y_57006) {

var F={procname:"html5_game.renderText",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_57003.fillText(toJSStr(text_57004), x_57005, y_57006);
framePtr = F.prev;
}
function render_57336(game_57338) {

var F={procname:"html5_game.render",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
fillStyleeq__46289(game_57338.renderer, rgb_46201(110, 132, 174));
game_57338.renderer.fillRect(0.0, 0.0, 1.2800000000000000e+03, 7.2000000000000000e+02);
drawHexGrid_57311(game_57338);
F.line = 142;
game_57338.renderer.font = "16px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(0));
renderText_57001(game_57338.renderer, (makeNimstrLit("Moves: ").slice(0,-1)).concat(cstrToNimstr((game_57338.nMoves)+"")), 1.1800000000000000e+03, 6.0000000000000000e+01);
if (game_57338.isWin) {
F.line = 146;
game_57338.renderer.font = "48px Serif";
fillStyleeq__46289(game_57338.renderer, rgb_46207(16777215));
renderText_57001(game_57338.renderer, makeNimstrLit("Won!"), 1.1800000000000000e+03, 9.0000000000000000e+01);
}

framePtr = F.prev;
}
function loop_57517() {

var F={procname:"html5_game.loop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
logic_57357(game_57420[0]);
render_57336(game_57420[0]);
requestAnimationFrame(loop_57517);
framePtr = F.prev;
}
function main_57519() {

var F={procname:"html5_game.main",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
loop_57517();
framePtr = F.prev;
}
main_57519();
</script></body></html>
