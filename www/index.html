<html>

<body oncontextmenu="return false;" style="margin: 0">
    <script>/* Generated by the Nim Compiler v0.16.1 */
/*   (c) 2017 Andreas Rumpf */

var framePtr = null;
var excHandler = 0;
var lastJSError = null;
if (typeof Int8Array === 'undefined') Int8Array = Array;
if (typeof Int16Array === 'undefined') Int16Array = Array;
if (typeof Int32Array === 'undefined') Int32Array = Array;
if (typeof Uint8Array === 'undefined') Uint8Array = Array;
if (typeof Uint16Array === 'undefined') Uint16Array = Array;
if (typeof Uint32Array === 'undefined') Uint32Array = Array;
if (typeof Float32Array === 'undefined') Float32Array = Array;
if (typeof Float64Array === 'undefined') Float64Array = Array;
var NTI3426 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3428 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56384 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56344 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56671 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56362 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI3446 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI47028 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI58220 = {size: 0,kind: 16,base: null,node: null,finalizer: null};
var NTI56014 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI43021 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI130 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI56002 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56028 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56006 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI56133 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI56004 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI56131 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI56024 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI56026 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3454 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3458 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI124 = {size: 0,kind: 36,base: null,node: null,finalizer: null};
var NTI43023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3440 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI104 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI12609 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI3408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI138 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI140 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI3485 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI3424 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3438 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI3442 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NNI3442 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3442.node = NNI3442;
var NNI3438 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3438.node = NNI3438;
NTI3485.base = NTI3424;
var NNI3424 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI3485, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI140, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI138, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI138, name: "trace", sons: null}]};
NTI3424.node = NNI3424;
var NNI3408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3408.node = NNI3408;
NTI3424.base = NTI3408;
NTI3438.base = NTI3424;
NTI3442.base = NTI3438;
var NNI12609 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI140, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI104, name: "Field1", sons: null}]};
NTI12609.node = NNI12609;
var NNI3440 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3440.node = NNI3440;
NTI3440.base = NTI3438;
var NNI43023 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43023.node = NNI43023;
var NNI3458 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3458.node = NNI3458;
NTI3458.base = NTI3424;
var NNI3454 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3454.node = NNI3454;
NTI3454.base = NTI3424;
var NNI56026 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI56026.node = NNI56026;
var NNI56024 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI56024.node = NNI56024;
NTI56024.base = NTI3408;
NTI56026.base = NTI56024;
var NNI56004 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: [{kind: 1, offset: 0, typ: NTI56004, name: "empty", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56004, name: "collapsed", len: 0, sons: null}, 
{kind: 1, offset: 2, typ: NTI56004, name: "raised", len: 0, sons: null}]};
NTI56004.node = NNI56004;
NTI56131.base = NTI56004;
NTI56006.base = NTI56024;
NTI56133.base = NTI56006;
var NNI56002 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: [{kind: 1, offset: 0, typ: NTI56002, name: "bottomLeft", len: 0, sons: null}, 
{kind: 1, offset: 1, typ: NTI56002, name: "left", len: 0, sons: null}, 
{kind: 1, offset: 2, typ: NTI56002, name: "topLeft", len: 0, sons: null}, 
{kind: 1, offset: 3, typ: NTI56002, name: "topRight", len: 0, sons: null}, 
{kind: 1, offset: 4, typ: NTI56002, name: "right", len: 0, sons: null}, 
{kind: 1, offset: 5, typ: NTI56002, name: "bottomRight", len: 0, sons: null}]};
NTI56002.node = NNI56002;
var NNI56028 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "direction", len: 0, typ: NTI56002, name: "direction", sons: null}, 
{kind: 1, offset: "ignoreEmpty", len: 0, typ: NTI130, name: "ignoreEmpty", sons: null}]};
NTI56028.node = NNI56028;
NTI56028.base = NTI56024;
var NNI43021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI124, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI124, name: "y", sons: null}]};
NTI43021.node = NNI43021;
var NNI56014 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "x", len: 0, typ: NTI104, name: "x", sons: null}, 
{kind: 1, offset: "y", len: 0, typ: NTI104, name: "y", sons: null}]};
NTI56014.node = NNI56014;
NTI58220.base = NTI140;
NTI47028.base = NTI43021;
var NNI3446 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3446.node = NNI3446;
NTI3446.base = NTI3424;
NTI56362.base = NTI43023;
NTI56671.base = NTI56004;
NTI56344.base = NTI56002;
NTI56384.base = NTI56014;
var NNI3428 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3428.node = NNI3428;
var NNI3426 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI3426.node = NNI3426;
NTI3426.base = NTI3424;
NTI3428.base = NTI3426;
function makeNimstrLit(c_13603) {

    var ln = c_13603.length;
    var result = new Array(ln + 1);
    var i = 0;
    for (; i < ln; ++i) {
      result[i] = c_13603.charCodeAt(i);
    }
    result[i] = 0; // terminating zero
    return result;
    }
function SetConstr() {

      var result = {};
      for (var i = 0; i < arguments.length; ++i) {
        var x = arguments[i];
        if (typeof(x) == "object") {
          for (var j = x[0]; j <= x[1]; ++j) {
            result[j] = true;
          }
        } else {
          result[x] = true;
        }
      }
      return result;
    }
function nimCopy(dest_18818, src_18819, ti_18820) {

var result_19229 = null;
switch (ti_18820.kind) {
case 21: case 22: case 23: case 5: if (!(isFatPointer_18801(ti_18820))) {
result_19229 = src_18819;
}
else {
result_19229 = [src_18819[0], src_18819[1]];}


break;
case 19:       if (dest_18818 === null || dest_18818 === undefined) {
        dest_18818 = {};
      }
      else {
        for (var key in dest_18818) { delete dest_18818[key]; }
      }
      for (var key in src_18819) { dest_18818[key] = src_18819[key]; }
      result_19229 = dest_18818;
    
break;
case 18: case 17: if (!((ti_18820.base == null))) {
result_19229 = nimCopy(dest_18818, src_18819, ti_18820.base);
}
else {
if ((ti_18820.kind == 17)) {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {m_type: ti_18820} : dest_18818;}
else {
result_19229 = (dest_18818 === null || dest_18818 === undefined) ? {} : dest_18818;}
}
nimCopyAux(result_19229, src_18819, ti_18820.node);

break;
case 24: case 4: case 27: case 16:       if (src_18819 === null) {
        result_19229 = null;
      }
      else {
        if (dest_18818 === null || dest_18818 === undefined) {
          dest_18818 = new Array(src_18819.length);
        }
        else {
          dest_18818.length = src_18819.length;
        }
        result_19229 = dest_18818;
        for (var i = 0; i < src_18819.length; ++i) {
          result_19229[i] = nimCopy(result_19229[i], src_18819[i], ti_18820.base);
        }
      }
    
break;
case 28:       if (src_18819 !== null) {
        result_19229 = src_18819.slice(0);
      }
    
break;
default: 
result_19229 = src_18819;
break;
}
return result_19229;
}
function eqStrings(a_16203, b_16204) {

    if (a_16203 == b_16204) return true;
    if ((!a_16203) || (!b_16204)) return false;
    var alen = a_16203.length;
    if (alen != b_16204.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_16203[i] != b_16204[i]) return false;
    return true;
  }
function arrayConstr(len_19403, value_19404, typ_19405) {

      var result = new Array(len_19403);
      for (var i = 0; i < len_19403; ++i) result[i] = nimCopy(null, value_19404, typ_19405);
      return result;
    }
function cstrToNimstr(c_13803) {

  var ln = c_13803.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_13803.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else if((ch > 127) && (ch < 2048)) {
      result[r] = (ch >> 6) | 192;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    else {
      result[r] = (ch >> 12) | 224;
      ++r;
      result[r] = ((ch >> 6) & 63) | 128;
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  result[r] = 0; // terminating zero
  return result;
  }
function toJSStr(s_14003) {

    var len = s_14003.length-1;
    var asciiPart = new Array(len);
    var fcc = String.fromCharCode;
    var nonAsciiPart = null;
    var nonAsciiOffset = 0;
    for (var i = 0; i < len; ++i) {
      if (nonAsciiPart !== null) {
        var offset = (i - nonAsciiOffset) * 2;
        var code = s_14003[i].toString(16);
        if (code.length == 1) {
          code = "0"+code;
        }
        nonAsciiPart[offset] = "%";
        nonAsciiPart[offset + 1] = code;
      }
      else if (s_14003[i] < 128)
        asciiPart[i] = fcc(s_14003[i]);
      else {
        asciiPart.length = i;
        nonAsciiOffset = i;
        nonAsciiPart = new Array((len - i) * 2);
        --i;
      }
    }
    asciiPart = asciiPart.join("");
    return (nonAsciiPart === null) ?
        asciiPart : asciiPart + decodeURIComponent(nonAsciiPart.join(""));
  }
function raiseException(e_13006, ename_13007) {

e_13006.name = ename_13007;
if ((excHandler == 0)) {
unhandledException(e_13006);
}

e_13006.trace = nimCopy(null, rawWriteStackTrace_12828(), NTI138);
throw e_13006;}
function mulInt(a_16803, b_16804) {

      var result = a_16803 * b_16804;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function chckRange(i_19415, a_19416, b_19417) {

var Tmp1;
var result_19418 = 0;
BeforeRet: do {
if (!(a_19416 <= i_19415)) Tmp1 = false; else {Tmp1 = (i_19415 <= b_19417); }if (Tmp1) {
result_19418 = i_19415;
break BeforeRet;
}
else {
raiseRangeError();
}

} while (false); 
return result_19418;
}
function chckIndx(i_19409, a_19410, b_19411) {

var Tmp1;
var result_19412 = 0;
BeforeRet: do {
if (!(a_19410 <= i_19409)) Tmp1 = false; else {Tmp1 = (i_19409 <= b_19411); }if (Tmp1) {
result_19412 = i_19409;
break BeforeRet;
}
else {
raiseIndexError();
}

} while (false); 
return result_19412;
}
function addInt(a_16460, b_16461) {

      var result = a_16460 + b_16461;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function modInt(a_17203, b_17204) {

      if (b_17204 == 0) raiseDivByZero();
      if (b_17204 == -1 && a_17203 == 2147483647) raiseOverflow();
      return Math.floor(a_17203 % b_17204);
    }
function divInt(a_17003, b_17004) {

      if (b_17004 == 0) raiseDivByZero();
      if (b_17004 == -1 && a_17003 == 2147483647) raiseOverflow();
      return Math.floor(a_17003 / b_17004);
    }
var tileStates2Colors_58217 = nimCopy(null, ["rgb(0,0,0)", "rgb(200,200,255)", "rgb(80,120,240)"], NTI58220);
function subInt(a_16603, b_16604) {

      var result = a_16603 - b_16604;
      if (result > 2147483647 || result < -2147483648) raiseOverflow();
      return result;
    }
function isObj(obj_19477, subclass_19478) {

var result_19479 = false;
BeforeRet: do {
var x_19480 = obj_19477;
if ((x_19480 == subclass_19478)) {
result_19479 = true;
break BeforeRet;
}

L1: do {
L2: while (true) {
if (!!((x_19480 == subclass_19478))) break L2;
if ((x_19480 == null)) {
result_19479 = false;
break BeforeRet;
}

x_19480 = x_19480.base;
}
} while(false);
result_19479 = true;
break BeforeRet;
} while (false); 
return result_19479;
}
var directions2Vectors_56359 = nimCopy(null, [{x: -4.9999999999999978e-01, y: 8.6602540378443871e-01}, {x: -1.0000000000000000e+00, y: 1.2246467991473532e-16}, {x: -5.0000000000000044e-01, y: -8.6602540378443837e-01}, {x: 5.0000000000000011e-01, y: -8.6602540378443860e-01}, {x: 1.0000000000000000e+00, y: 0.0}, {x: 5.0000000000000011e-01, y: 8.6602540378443860e-01}], NTI56362);
var tileStates2Opposite_56668 = nimCopy(null, [0, 2, 1], NTI56671);
var directions2Opposites_56341 = nimCopy(null, [3, 4, 5, 0, 1, 2], NTI56344);
var directions2CoordsOffsets_56381 = nimCopy(null, [{x: 0, y: 1}, {x: -1, y: 1}, {x: -1, y: 0}, {x: 0, y: -1}, {x: 1, y: -1}, {x: 1, y: 0}], NTI56384);
function rawEcho() {

var node_16432 = null;
node_16432 = document.getElementsByTagName('body')[0];if ((node_16432 === null)) {
var e_16447 = null;
e_16447 = {m_type: NTI3428, parent: null, name: null, message: null, trace: null};
e_16447.message = nimCopy(null, makeNimstrLit("<body> element does not exist yet!"), NTI138);
e_16447.parent = null;
raiseException(e_16447, "IOError");
}

    for (var i = 0; i < arguments.length; ++i) {
      var x = toJSStr(arguments[i]);
      node_16432.appendChild(document.createTextNode(x));
    }
    node_16432.appendChild(document.createElement("br"));
    }
var nimvm_5887 = false;
var nim_program_result = 0;
var globalRaiseHook_10614 = [null];
var localRaiseHook_10619 = [null];
var outOfMemHook_10622 = [null];
function isFatPointer_18801(ti_18803) {

var result_18804 = false;
BeforeRet: do {
result_18804 = !((SetConstr(17, 16, 4, 18, 27, 19, 23, 22, 21)[ti_18803.base.kind] != undefined));
break BeforeRet;
} while (false); 
return result_18804;
}
function nimCopyAux(dest_18823, src_18824, n_18826) {

switch (n_18826.kind) {
case 0: 
break;
case 1:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
    
break;
case 2: L1: do {
var i_19215 = 0;
var colontmp__19217 = 0;
colontmp__19217 = (n_18826.len - 1);
var res_19220 = 0;
L2: do {
L3: while (true) {
if (!(res_19220 <= colontmp__19217)) break L3;
i_19215 = res_19220;
nimCopyAux(dest_18823, src_18824, n_18826.sons[i_19215]);
res_19220 += 1;
}
} while(false);
} while(false);

break;
case 3:       dest_18823[n_18826.offset] = nimCopy(dest_18823[n_18826.offset], src_18824[n_18826.offset], n_18826.typ);
      for (var i = 0; i < n_18826.sons.length; ++i) {
        nimCopyAux(dest_18823, src_18824, n_18826.sons[i][1]);
      }
    
break;
}
}
function add_10638(x_10641, x_10641_Idx, y_10642) {

        var len = x_10641[0].length-1;
        for (var i = 0; i < y_10642.length; ++i) {
          x_10641[0][len] = y_10642.charCodeAt(i);
          ++len;
        }
        x_10641[0][len] = 0
      }
function auxWriteStackTrace_12604(f_12606) {

var Tmp3;
var result_12607 = [null];
var it_12615 = f_12606;
var i_12616 = 0;
var total_12617 = 0;
var tempFrames_12621 = arrayConstr(64, {Field0: null, Field1: 0}, NTI12609);
L1: do {
L2: while (true) {
if (!!((it_12615 == null))) Tmp3 = false; else {Tmp3 = (i_12616 <= 63); }if (!Tmp3) break L2;
tempFrames_12621[i_12616].Field0 = it_12615.procname;
tempFrames_12621[i_12616].Field1 = it_12615.line;
i_12616 += 1;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
L4: do {
L5: while (true) {
if (!!((it_12615 == null))) break L5;
total_12617 += 1;
it_12615 = it_12615.prev;
}
} while(false);
result_12607[0] = nimCopy(null, makeNimstrLit(""), NTI138);
if (!((total_12617 == i_12616))) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("(")); } else { result_12607[0] = makeNimstrLit("(");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr(((total_12617 - i_12616))+"")); } else { result_12607[0] = cstrToNimstr(((total_12617 - i_12616))+"");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(" calls omitted) ...\x0A")); } else { result_12607[0] = makeNimstrLit(" calls omitted) ...\x0A");};
}

L6: do {
var j_12815 = 0;
var colontmp__12821 = 0;
colontmp__12821 = (i_12616 - 1);
var res_12824 = colontmp__12821;
L7: do {
L8: while (true) {
if (!(0 <= res_12824)) break L8;
j_12815 = res_12824;
add_10638(result_12607, 0, tempFrames_12621[j_12815].Field0);
if ((0 < tempFrames_12621[j_12815].Field1)) {
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit(", line: ")); } else { result_12607[0] = makeNimstrLit(", line: ");};
if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(cstrToNimstr((tempFrames_12621[j_12815].Field1)+"")); } else { result_12607[0] = cstrToNimstr((tempFrames_12621[j_12815].Field1)+"");};
}

if (result_12607[0] != null) { result_12607[0] = (result_12607[0].slice(0, -1)).concat(makeNimstrLit("\x0A")); } else { result_12607[0] = makeNimstrLit("\x0A");};
res_12824 -= 1;
}
} while(false);
} while(false);
return result_12607[0];
}
function rawWriteStackTrace_12828() {

var result_12830 = null;
if (!((framePtr == null))) {
result_12830 = nimCopy(null, (makeNimstrLit("Traceback (most recent call last)\x0A").slice(0,-1)).concat(auxWriteStackTrace_12604(framePtr)), NTI138);
}
else {
result_12830 = nimCopy(null, makeNimstrLit("No stack traceback available\x0A"), NTI138);
}

return result_12830;
}
function unhandledException(e_12854) {

var Tmp1;
var buf_12855 = /**/[makeNimstrLit("")];
if (!!(eqStrings(e_12854.message, null))) Tmp1 = false; else {Tmp1 = !((e_12854.message[0] == 0)); }if (Tmp1) {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception: ")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception: ");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(e_12854.message); } else { buf_12855[0] = e_12854.message;};
}
else {
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("Error: unhandled exception")); } else { buf_12855[0] = makeNimstrLit("Error: unhandled exception");};
}

if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit(" [")); } else { buf_12855[0] = makeNimstrLit(" [");};
add_10638(buf_12855, 0, e_12854.name);
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(makeNimstrLit("]\x0A")); } else { buf_12855[0] = makeNimstrLit("]\x0A");};
if (buf_12855[0] != null) { buf_12855[0] = (buf_12855[0].slice(0, -1)).concat(rawWriteStackTrace_12828()); } else { buf_12855[0] = rawWriteStackTrace_12828();};
var cbuf_13001 = toJSStr(buf_12855[0]);
framePtr = null;
  if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_13001);
  }
  else {
    throw cbuf_13001;
  }
  }
function raiseOverflow() {

var e_13441 = null;
e_13441 = {m_type: NTI3442, parent: null, name: null, message: null, trace: null};
e_13441.message = nimCopy(null, makeNimstrLit("over- or underflow"), NTI138);
e_13441.parent = null;
raiseException(e_13441, "OverflowError");
}
function raiseDivByZero() {

var e_13459 = null;
e_13459 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
e_13459.message = nimCopy(null, makeNimstrLit("division by zero"), NTI138);
e_13459.parent = null;
raiseException(e_13459, "DivByZeroError");
}
var IDMATRIX_43056 = matrix2d_43040(1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, 0.0, 0.0);
var ORIGO_43057 = point2d_43052(0.0, 0.0);
var XAXIS_43058 = vector2d_43048(1.0000000000000000e+00, 0.0);
var YAXIS_43059 = vector2d_43048(0.0, 1.0000000000000000e+00);
var state_49605 = /**/[{a0: 1773455756, a1: 4275166512}];
function getTime_52042() {

var result_52413 = null;
var F={procname:"times.getTime",prev:framePtr,filename:"lib/pure/times.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 586;
result_52413 = new Date();
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_52413;
}
var startMilsecs_52448 = /**/[getTime_52042()];
function getContext2D_46713(c_46715) {

var result_46716 = null;
var F={procname:"html5_canvas.getContext2D",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/html5_canvas.nim",line:0};
framePtr = F;
F.line = 24;
result_46716=c_46715.getContext('2d');framePtr = F.prev;
return result_46716;
}
function vector2d_43048(x_43050, y_43051) {

var result_43317 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.vector2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 337;
result_43317.x = x_43050;
F.line = 338;
result_43317.y = y_43051;
framePtr = F.prev;
return result_43317;
}
function slash__20607(x_20609, y_20610) {

var result_20611 = 0.0;
var F={procname:"system./",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 3268;
result_20611 = (x_20609 / y_20610);
framePtr = F.prev;
return result_20611;
}
function newSeq_56162(len_56166) {

var result_56168 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56168 = new Array(len_56166); for (var i=0;i<len_56166;++i) {result_56168[i]=0;}framePtr = F.prev;
return result_56168;
}
function raiseRangeError() {

var e_13477 = null;
e_13477 = {m_type: NTI3458, parent: null, name: null, message: null, trace: null};
e_13477.message = nimCopy(null, makeNimstrLit("value out of range"), NTI138);
e_13477.parent = null;
raiseException(e_13477, "RangeError");
}
function newSeq_56201(len_56205) {

var result_56207 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_56207 = new Array(len_56205); for (var i=0;i<len_56205;++i) {result_56207[i]=null;}framePtr = F.prev;
return result_56207;
}
function raiseIndexError() {

var e_13495 = null;
e_13495 = {m_type: NTI3454, parent: null, name: null, message: null, trace: null};
e_13495.message = nimCopy(null, makeNimstrLit("index out of bounds"), NTI138);
e_13495.parent = null;
raiseException(e_13495, "IndexError");
}
function newNeighborTileEffect_56089() {

var result_56091 = null;
var F={procname:"logic.newNeighborTileEffect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56091 = {m_type: NTI56026};
framePtr = F.prev;
return result_56091;
}
function newHexGrid_56128(width_56130, states_56132, effects_56134) {

var result_56135 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56135 = {width: 0, tileStates: null, tileEffects: null};
F.line = 102;
result_56135.width = width_56130;
F.line = 103;
result_56135.tileStates = nimCopy(null, states_56132, NTI56131);
F.line = 104;
result_56135.tileEffects = nimCopy(null, effects_56134, NTI56133);
framePtr = F.prev;
return result_56135;
}
function newHexGrid_56144(width_56146) {

var result_56147 = null;
var F={procname:"logic.newHexGrid",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 107;
F.line = 108;
var nTiles_56148 = mulInt(width_56146, width_56146);
F.line = 109;
var states_56187 = newSeq_56162(chckRange(nTiles_56148, 0, 2147483647));
F.line = 110;
var effects_56226 = newSeq_56201(chckRange(nTiles_56148, 0, 2147483647));
L1: do {
F.line = 111;
var i_56236 = 0;
F.line = 3715;
var i_56240 = 0;
L2: do {
F.line = 3716;
L3: while (true) {
if (!(i_56240 < nTiles_56148)) break L3;
F.line = 3717;
i_56236 = i_56240;
F.line = 112;
effects_56226[chckIndx(i_56236, 0, effects_56226.length)-0] = newNeighborTileEffect_56089();
i_56240 = addInt(i_56240, 1);
}
} while(false);
} while(false);
result_56147 = newHexGrid_56128(width_56146, states_56187, effects_56226);
framePtr = F.prev;
return result_56147;
}
function nTiles_56247(grid_56249) {

var result_56250 = 0;
var F={procname:"logic.nTiles",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 119;
result_56250 = mulInt(grid_56249.width, grid_56249.width);
framePtr = F.prev;
return result_56250;
}
function rotl_49802(x_49804, k_49805) {

var result_49806 = 0;
var F={procname:"random.rotl",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 44;
result_49806 = ((x_49804 << k_49805) | ((x_49804 >>> 0) >>> ((64 - k_49805) >>> 0)));
framePtr = F.prev;
return result_49806;
}
function next_49846(s_49849) {

var result_49850 = 0;
var F={procname:"random.next",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
F.line = 47;
var s0_49851 = s_49849.a0;
F.line = 48;
var s1_49852 = s_49849.a1;
F.line = 49;
result_49850 = ((s0_49851 + s1_49852) >>> 0);
F.line = 50;
s1_49852 = (s1_49852 ^ s0_49851);
F.line = 51;
s_49849.a0 = ((rotl_49802(s0_49851, 55) ^ s1_49852) ^ (s1_49852 << 14));
F.line = 52;
s_49849.a1 = rotl_49802(s1_49852, 36);
framePtr = F.prev;
return result_49850;
}
function random_50282(max_50284) {

var result_50285 = 0;
var F={procname:"random.random",prev:framePtr,filename:"lib/pure/random.nim",line:0};
framePtr = F;
BeforeRet: do {
L1: do {
F.line = 79;
L2: while (true) {
if (!true) break L2;
F.line = 80;
var x_50287 = next_49846(state_49605[0]);
if ((x_50287 < ((4294967295 - (4294967295 % chckRange(max_50284, 0, 4294967295))) >>> 0))) {
F.line = 82;
result_50285 = ((x_50287 % max_50284)|0);
break BeforeRet;
}

}
} while(false);
} while (false); 
framePtr = F.prev;
return result_50285;
}
function newLinearTileEffect_56100(dir_56102, ignoreEmpty_56103) {

var result_56104 = null;
var F={procname:"logic.newLinearTileEffect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
result_56104 = {m_type: NTI56028, direction: 0, ignoreEmpty: false};
F.line = 93;
result_56104.direction = dir_56102;
F.line = 94;
result_56104.ignoreEmpty = ignoreEmpty_56103;
framePtr = F.prev;
return result_56104;
}
function newLinearTileEffect_56113() {

var result_56115 = null;
var F={procname:"logic.newLinearTileEffect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 96;
result_56115 = newLinearTileEffect_56100(chckRange(random_50282(6), 0, 5), (random_50282(2) == 0));
framePtr = F.prev;
return result_56115;
}
function randomize_56303(grid_56305) {

var Tmp5;
var F={procname:"logic.randomize",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 137;
var i_56306 = 0;
L2: do {
F.line = 125;
var i_56324 = 0;
F.line = 3714;
var colontmp__56326 = 0;
F.line = 125;
colontmp__56326 = nTiles_56247(grid_56305);
F.line = 3715;
var i_56328 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56328 < colontmp__56326)) break L4;
F.line = 3717;
i_56324 = i_56328;
F.line = 126;
i_56306 = i_56324;
F.line = 138;
grid_56305.tileStates[chckIndx(i_56306, 0, grid_56305.tileStates.length)-0] = chckRange(random_50282(3), 0, 2);
F.line = 139;
if ((random_50282(2) == 0)) {
Tmp5 = newNeighborTileEffect_56089();
}
else {
Tmp5 = newLinearTileEffect_56113();
}

grid_56305.tileEffects[chckIndx(i_56306, 0, grid_56305.tileEffects.length)-0] = Tmp5;
i_56328 = addInt(i_56328, 1);
}
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function newGame_58265(renderer_58267) {

var result_58268 = null;
var F={procname:"html5_game.newGame",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
result_58268 = {renderer: null, pressedMousePos: {x: 0.0, y: 0.0}, currentMousePos: {x: 0.0, y: 0.0}, inputs: {}, grid: null, topPos: {x: 0.0, y: 0.0}, hexRadius: 0.0, nMoves: 0, isWin: false};
F.line = 49;
result_58268.renderer = renderer_58267;
F.line = 50;
nimCopy(result_58268.topPos, vector2d_43048(slash__20607(1280, 2), 5.0000000000000000e+01), NTI43023);
F.line = 51;
result_58268.hexRadius = 3.0000000000000000e+01;
F.line = 52;
result_58268.grid = newHexGrid_56144(5);
randomize_56303(result_58268.grid);
framePtr = F.prev;
return result_58268;
}
var Tmp1;
var canvasId_58501 = /**/[makeNimstrLit("canvas")];
var old_58502 = /**/[document.getElementById(toJSStr(canvasId_58501[0]))];
if (!((old_58502[0] === null))) {
Tmp1 = old_58502[0];
}
else {
Tmp1 = document.createElement(toJSStr(canvasId_58501[0]));
}

var canvas_58511 = /**/[Tmp1];
var ctx_58512 = /**/[getContext2D_46713(canvas_58511[0])];
var game_58513 = /**/[newGame_58265(ctx_58512[0])];
function offsetLeft_58514(el_58516) {

var result_58517 = 0.0;
var F={procname:"html5_game.offsetLeft",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 183;
el_58516.offsetLeft;framePtr = F.prev;
return result_58517;
}
function offsetTop_58518(el_58520) {

var result_58521 = 0.0;
var F={procname:"html5_game.offsetTop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 184;
el_58520.offsetTop;framePtr = F.prev;
return result_58521;
}
function relative_58525(ev_58527) {

var result_58528 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.relative",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 192;
var x_58529 = ev_58527.x;
F.line = 193;
var y_58530 = ev_58527.y;
F.line = 194;
var ol_58531 = offsetLeft_58514(ev_58527.target);
F.line = 195;
var ot_58532 = offsetTop_58518(ev_58527.target);
F.line = 196;
result_58528.x = (x_58529 - ol_58531);
F.line = 197;
result_58528.y = (y_58530 - ot_58532);
framePtr = F.prev;
return result_58528;
}
function stopPropagation_58535(ev_58537) {

var F={procname:"html5_game.stopPropagation",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 199;
ev_58537.stopPropagation();framePtr = F.prev;
}
function colonanonymous__58538(ev_58540) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 202;
nimCopy(game_58513[0].pressedMousePos, relative_58525(ev_58540), NTI43021);
game_58513[0].inputs[3] = true;
if ((ev_58540.button == 2)) {
game_58513[0].inputs[2] = true;
}

stopPropagation_58535(ev_58540);
framePtr = F.prev;
}
canvas_58511[0].onmousedown = colonanonymous__58538;
function colonanonymous__58563(ev_58565) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
delete game_58513[0].inputs[3];
game_58513[0].inputs[4] = true;
if ((ev_58565.button == 2)) {
delete game_58513[0].inputs[2];
}

stopPropagation_58535(ev_58565);
framePtr = F.prev;
}
canvas_58511[0].onmouseup = colonanonymous__58563;
function colonanonymous__58599(ev_58601) {

var F={procname:"html5_game.:anonymous",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 216;
nimCopy(game_58513[0].currentMousePos, relative_58525(ev_58601), NTI43021);
framePtr = F.prev;
}
canvas_58511[0].onmousemove = colonanonymous__58599;
canvas_58511[0].width = 1280;
canvas_58511[0].height = 720;
if ((old_58502[0] === null)) {
document.body.appendChild(canvas_58511[0]);
}

function setElements_43114(t_43117, ax_43118, ay_43119, bx_43120, by_43121, tx_43122, ty_43123) {

var F={procname:"basic2d.setElements",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 137;
t_43117.ax = ax_43118;
F.line = 138;
t_43117.ay = ay_43119;
F.line = 139;
t_43117.bx = bx_43120;
F.line = 140;
t_43117.by = by_43121;
F.line = 141;
t_43117.tx = tx_43122;
F.line = 142;
t_43117.ty = ty_43123;
framePtr = F.prev;
}
function amp__43134(a_43136, b_43137) {

var result_43138 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43138[0], ((a_43136.ax * b_43137.ax) + (a_43136.ay * b_43137.bx)), ((a_43136.ax * b_43137.ay) + (a_43136.ay * b_43137.by)), ((a_43136.bx * b_43137.ax) + (a_43136.by * b_43137.bx)), ((a_43136.bx * b_43137.ay) + (a_43136.by * b_43137.by)), (((a_43136.tx * b_43137.ax) + (a_43136.ty * b_43137.bx)) + b_43137.tx), (((a_43136.tx * b_43137.ay) + (a_43136.ty * b_43137.by)) + b_43137.ty));
framePtr = F.prev;
return result_43138[0];
}
function matrix2d_43040(ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047) {

var result_43132 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.matrix2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43132[0], ax_43042, ay_43043, bx_43044, by_43045, tx_43046, ty_43047);
framePtr = F.prev;
return result_43132[0];
}
function scale_43140(s_43142) {

var result_43143 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.scale",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43143[0], s_43142, 0.0, 0.0, s_43142, 0.0, 0.0);
framePtr = F.prev;
return result_43143[0];
}
function move_43186(v_43188) {

var result_43189 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.move",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
setElements_43114(result_43189[0], 1.0000000000000000e+00, 0.0, 0.0, 1.0000000000000000e+00, v_43188.x, v_43188.y);
framePtr = F.prev;
return result_43189[0];
}
function determinant_43258(t_43260) {

var result_43261 = 0.0;
var F={procname:"basic2d.determinant",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 277;
result_43261 = ((t_43260.ax * t_43260.by) - (t_43260.bx * t_43260.ay));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_43261;
}
function inverse_43266(m_43268) {

var result_43269 = [{ax: 0.0, ay: 0.0, bx: 0.0, by: 0.0, tx: 0.0, ty: 0.0}];
var F={procname:"basic2d.inverse",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 288;
var d_43270 = determinant_43258(m_43268);
if ((d_43270 == 0.0)) {
F.line = 290;
F.line = 2577;
var e_43277 = null;
e_43277 = {m_type: NTI3440, parent: null, name: null, message: null, trace: null};
F.line = 2579;
e_43277.message = nimCopy(null, makeNimstrLit("Cannot invert a zero determinant matrix"), NTI138);
F.line = 2580;
e_43277.parent = null;
raiseException(e_43277, "DivByZeroError");
}

setElements_43114(result_43269[0], (m_43268.by / d_43270), (-(m_43268.ay) / d_43270), (-(m_43268.bx) / d_43270), (m_43268.ax / d_43270), (((m_43268.bx * m_43268.ty) - (m_43268.by * m_43268.tx)) / d_43270), (((m_43268.ay * m_43268.tx) - (m_43268.ax * m_43268.ty)) / d_43270));
framePtr = F.prev;
return result_43269[0];
}
function amp__43952(p_43954, t_43955) {

var result_43956 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.&",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 688;
result_43956.x = (((p_43954.x * t_43955.ax) + (p_43954.y * t_43955.bx)) + t_43955.tx);
F.line = 689;
result_43956.y = (((p_43954.x * t_43955.ay) + (p_43954.y * t_43955.by)) + t_43955.ty);
framePtr = F.prev;
return result_43956;
}
function point2d_43052(x_43054, y_43055) {

var result_43916 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.point2d",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 654;
result_43916.x = x_43054;
F.line = 655;
result_43916.y = y_43055;
framePtr = F.prev;
return result_43916;
}
function screenPos2Coords_58297(game_58299, pos_58300) {

var result_58301 = {x: 0, y: 0};
var F={procname:"html5_game.screenPos2Coords",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 109;
var xform_inv_58303 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_58299.hexRadius))), move_43186(game_58299.topPos));
F.line = 110;
var xform_58304 = inverse_43266(xform_inv_58303);
F.line = 111;
var proj_58305 = amp__43952(point2d_43052(pos_58300.x, pos_58300.y), xform_58304);
F.line = 113;
result_58301.x = ((proj_58305.x + 5.0000000000000000e-01)|0);
F.line = 114;
result_58301.y = ((proj_58305.y + 5.0000000000000000e-01)|0);
framePtr = F.prev;
return result_58301;
}
function inside_56293(grid_56295, ind_56296) {

var Tmp1;
var result_56297 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 132;
if (!(0 <= ind_56296)) Tmp1 = false; else {Tmp1 = (ind_56296 < nTiles_56247(grid_56295)); }result_56297 = Tmp1;
framePtr = F.prev;
return result_56297;
}
function getStateAt_56578(grid_56580, ind_56581) {

var result_56582 = 0;
var F={procname:"logic.getStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 204;
result_56582 = grid_56580.tileStates[chckIndx(ind_56581, 0, grid_56580.tileStates.length)-0];
framePtr = F.prev;
return result_56582;
}
function X5BX5D__56588(grid_56590, ind_56591) {

var result_56592 = 0;
var F={procname:"logic.[]",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 207;
result_56592 = getStateAt_56578(grid_56590, ind_56591);
framePtr = F.prev;
return result_56592;
}
function isEmptyAt_56618(grid_56620, ind_56621) {

var result_56622 = false;
var F={procname:"logic.isEmptyAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 216;
result_56622 = (X5BX5D__56588(grid_56620, ind_56621) == 0);
framePtr = F.prev;
return result_56622;
}
function isVoidAt_56658(grid_56660, ind_56661) {

var result_56662 = false;
var F={procname:"logic.isVoidAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 222;
result_56662 = (!(inside_56293(grid_56660, ind_56661)) || isEmptyAt_56618(grid_56660, ind_56661));
framePtr = F.prev;
return result_56662;
}
function newCoords_56242(x_56244, y_56245) {

var result_56246 = {x: 0, y: 0};
var F={procname:"logic.newCoords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 116;
result_56246.x = x_56244;
F.line = 117;
result_56246.y = y_56245;
framePtr = F.prev;
return result_56246;
}
function ind2Coords_56251(grid_56253, ind_56254) {

var result_56255 = {x: 0, y: 0};
var F={procname:"logic.ind2Coords",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 121;
nimCopy(result_56255, newCoords_56242(modInt(ind_56254, grid_56253.width), divInt(ind_56254, grid_56253.width)), NTI56014);
framePtr = F.prev;
return result_56255;
}
function actionAt_56813(grid_56815, ind_56816) {

var result_56817 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
if (!(isVoidAt_56658(grid_56815, ind_56816))) {
affect_56066(grid_56815.tileEffects[chckIndx(ind_56816, 0, grid_56815.tileEffects.length)-0], grid_56815, ind2Coords_56251(grid_56815, ind_56816));
F.line = 259;
result_56817 = true;
}

framePtr = F.prev;
return result_56817;
}
function coords2Ind_56256(grid_56258, coords_56259) {

var result_56260 = 0;
var F={procname:"logic.coords2Ind",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 122;
result_56260 = addInt(coords_56259.x, mulInt(coords_56259.y, grid_56258.width));
framePtr = F.prev;
return result_56260;
}
function actionAt_56818(grid_56820, coords_56821) {

var result_56822 = false;
var F={procname:"logic.actionAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 260;
result_56822 = actionAt_56813(grid_56820, coords2Ind_56256(grid_56820, coords_56821));
framePtr = F.prev;
return result_56822;
}
function isRaisedAt_56638(grid_56640, ind_56641) {

var result_56642 = false;
var F={procname:"logic.isRaisedAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 219;
result_56642 = (X5BX5D__56588(grid_56640, ind_56641) == 2);
framePtr = F.prev;
return result_56642;
}
function isWin_56823(grid_56825) {

var result_56826 = false;
var F={procname:"logic.isWin",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 263;
result_56826 = true;
L1: do {
F.line = 264;
var ind_56827 = 0;
L2: do {
F.line = 125;
var i_56832 = 0;
F.line = 3714;
var colontmp__56834 = 0;
F.line = 125;
colontmp__56834 = nTiles_56247(grid_56825);
F.line = 3715;
var i_56836 = 0;
L3: do {
F.line = 3716;
L4: while (true) {
if (!(i_56836 < colontmp__56834)) break L4;
F.line = 3717;
i_56832 = i_56836;
F.line = 126;
ind_56827 = i_56832;
if ((!(isEmptyAt_56618(grid_56825, ind_56827)) && !(isRaisedAt_56638(grid_56825, ind_56827)))) {
F.line = 266;
result_56826 = false;
F.line = 267;
break BeforeRet;
}

i_56836 = addInt(i_56836, 1);
}
} while(false);
} while(false);
} while(false);
} while (false); 
framePtr = F.prev;
return result_56826;
}
function reset_58280(game_58282) {

var F={procname:"html5_game.reset",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 56;
game_58282.nMoves = 0;
F.line = 57;
game_58282.isWin = false;
randomize_56303(game_58282.grid);
framePtr = F.prev;
}
function logic_58450(game_58452) {

var F={procname:"html5_game.logic",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
if ((game_58452.inputs[4] != undefined)) {
if (!(game_58452.isWin)) {
F.line = 162;
var coords_58464 = screenPos2Coords_58297(game_58452, vector2d_43048(game_58452.currentMousePos.x, game_58452.currentMousePos.y));
if (actionAt_56818(game_58452.grid, coords_58464)) {
game_58452.nMoves = addInt(game_58452.nMoves, 1);
}

F.line = 165;
game_58452.isWin = isWin_56823(game_58452.grid);
}
else {
reset_58280(game_58452);
}

}

if ((game_58452.inputs[2] != undefined)) {
reset_58280(game_58452);
}

delete game_58452.inputs[4];
framePtr = F.prev;
}
function fillStyleeq__46289(ctx_46291, color_46292) {

var F={procname:"html5_canvas.fillStyle=",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/CanvasRenderingContext2D.nim",line:0};
framePtr = F;
F.line = 44;
ctx_46291.fillStyle=color_46292;framePtr = F.prev;
}
function rgb_46201(r_46203, g_46204, b_46205) {

var result_46206 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 8;
result_46206 = toJSStr((makeNimstrLit("rgb(").slice(0,-1)).concat(cstrToNimstr((r_46203)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((g_46204)+"").slice(0,-1),makeNimstrLit(",").slice(0,-1),cstrToNimstr((b_46205)+"").slice(0,-1),makeNimstrLit(")")));
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46206;
}
function coords2ScreenPos_58283(game_58285, coords_58286) {

var result_58287 = {x: 0.0, y: 0.0};
var F={procname:"html5_game.coords2ScreenPos",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 96;
var c_58288 = point2d_43052(coords_58286.x, coords_58286.y);
F.line = 97;
var xform_58290 = amp__43134(amp__43134(matrix2d_43040(5.0000000000000011e-01, 8.6602540378443860e-01, -4.9999999999999978e-01, 8.6602540378443871e-01, 0.0, 0.0), scale_43140((2.0000000000000000e+00 * game_58285.hexRadius))), move_43186(game_58285.topPos));
F.line = 98;
var p_58291 = amp__43952(c_58288, xform_58290);
F.line = 99;
result_58287.x = p_58291.x;
F.line = 100;
result_58287.y = p_58291.y;
framePtr = F.prev;
return result_58287;
}
function getEffectAt_56730(grid_56732, ind_56733) {

var result_56734 = null;
var F={procname:"logic.getEffectAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 239;
result_56734 = grid_56732.tileEffects[chckIndx(ind_56733, 0, grid_56732.tileEffects.length)-0];
framePtr = F.prev;
return result_56734;
}
function extractRGB_45237(a_45239) {

var result_45246 = {Field0: 0, Field1: 0, Field2: 0};
var F={procname:"colors.extractRGB",prev:framePtr,filename:"lib/pure/colors.nim",line:0};
framePtr = F;
F.line = 55;
result_45246.Field0 = (((a_45239 >>> 0) >>> 16) & 255);
F.line = 56;
result_45246.Field1 = (((a_45239 >>> 0) >>> 8) & 255);
F.line = 57;
result_45246.Field2 = (a_45239 & 255);
framePtr = F.prev;
return result_45246;
}
function rgb_46207(clr_46209) {

var result_46210 = null;
var F={procname:"html5_canvas.rgb",prev:framePtr,filename:"/home/ciuncan/.nimble/pkgs/html5_canvas-1.2/lib/rgb.nim",line:0};
framePtr = F;
BeforeRet: do {
F.line = 12;
var comp_46211 = extractRGB_45237(clr_46209);
F.line = 13;
result_46210 = rgb_46201(comp_46211.Field0, comp_46211.Field1, comp_46211.Field2);
break BeforeRet;
} while (false); 
framePtr = F.prev;
return result_46210;
}
function newSeq_47023(len_47027) {

var result_47029 = null;
var F={procname:"newSeq.newSeq",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
result_47029 = new Array(len_47027); for (var i=0;i<len_47027;++i) {result_47029[i]={x: 0.0, y: 0.0};}framePtr = F.prev;
return result_47029;
}
function degToRad_44436(deg_44438) {

var result_44439 = 0.0;
var F={procname:"basic2d.degToRad",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 850;
result_44439 = (deg_44438 / 5.7295779513082323e+01);
framePtr = F.prev;
return result_44439;
}
function plus__43986(p_43988, v_43989) {

var result_43990 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 718;
result_43990.x = (p_43988.x + v_43989.x);
F.line = 719;
result_43990.y = (p_43988.y + v_43989.y);
framePtr = F.prev;
return result_43990;
}
function polar_44062(p_44064, ang_44065, dist_44066) {

var result_44067 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.polar",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 753;
result_44067.x = (p_44064.x + (Math.cos(ang_44065) * dist_44066));
F.line = 754;
result_44067.y = (p_44064.y + (Math.sin(ang_44065) * dist_44066));
framePtr = F.prev;
return result_44067;
}
function genNGonPoints_47002(center_47004, radius_47005, n_47006, rotate_47007) {

var result_47009 = null;
var F={procname:"geometry.genNGonPoints",prev:framePtr,filename:"hexcapepkg/geometry.nim",line:0};
framePtr = F;
F.line = 5;
result_47009 = nimCopy(null, newSeq_47023(chckRange(n_47006, 0, 2147483647)), NTI47028);
L1: do {
F.line = 7;
var i_47057 = 0;
F.line = 3715;
var i_47064 = 0;
L2: do {
F.line = 3716;
L3: while (true) {
if (!(i_47064 < n_47006)) break L3;
F.line = 3717;
i_47057 = i_47064;
F.line = 8;
var startAngle_47058 = degToRad_44436(((i_47057 * (3.6000000000000000e+02 / n_47006)) + rotate_47007));
F.line = 9;
nimCopy(result_47009[chckIndx(i_47057, 0, result_47009.length)-0], plus__43986(polar_44062(ORIGO_43057, startAngle_47058, radius_47005), center_47004), NTI43021);
i_47064 = addInt(i_47064, 1);
}
} while(false);
} while(false);
framePtr = F.prev;
return result_47009;
}
function sysFatal_21421(message_21427) {

var F={procname:"sysFatal.sysFatal",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 2597;
var e_21429 = null;
e_21429 = {m_type: NTI3446, parent: null, name: null, message: null, trace: null};
F.line = 2599;
e_21429.message = nimCopy(null, message_21427, NTI138);
F.line = 2600;
raiseException(e_21429, "AssertionError");
framePtr = F.prev;
}
function raiseAssert_21416(msg_21418) {

var F={procname:"system.raiseAssert",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
sysFatal_21421(msg_21418);
framePtr = F.prev;
}
function failedAssertImpl_21439(msg_21441) {

var F={procname:"system.failedAssertImpl",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
raiseAssert_21416(msg_21441);
framePtr = F.prev;
}
function drawNGon_58007(ctx_58009, points_58011) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_58009.beginPath();
ctx_58009.moveTo(points_58011[chckIndx(subInt((points_58011 != null ? points_58011.length : 0), 1), 0, points_58011.length)-0].x, points_58011[chckIndx(subInt((points_58011 != null ? points_58011.length : 0), 1), 0, points_58011.length)-0].y);
L1: do {
F.line = 17;
var p_58202 = {x: 0.0, y: 0.0};
F.line = 3523;
var i_58206 = 0;
F.line = 3524;
var L_58208 = (points_58011 != null ? points_58011.length : 0);
L2: do {
F.line = 3525;
L3: while (true) {
if (!(i_58206 < L_58208)) break L3;
F.line = 3526;
p_58202 = points_58011[chckIndx(i_58206, 0, points_58011.length)-0];
ctx_58009.lineTo(p_58202.x, p_58202.y);
i_58206 = addInt(i_58206, 1);
if (!(((points_58011 != null ? points_58011.length : 0) == L_58208))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
ctx_58009.closePath();
ctx_58009.fill();
framePtr = F.prev;
}
function drawNGon_58209(ctx_58211, center_58212, radius_58213, n_58214, rotate_58215) {

var F={procname:"html5_game.drawNGon",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
F.line = 24;
var points_58216 = genNGonPoints_47002(center_58212, radius_58213, n_58214, rotate_58215);
drawNGon_58007(ctx_58211, points_58216);
framePtr = F.prev;
}
function plus__43598(a_43587, b_43589) {

var result_43600 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.+",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 121;
nimCopy(result_43600, vector2d_43048((a_43587.x + b_43589.x), (a_43587.y + b_43589.y)), NTI43023);
framePtr = F.prev;
return result_43600;
}
function star__43643(a_43633, b_43635) {

var result_43645 = {x: 0.0, y: 0.0};
var F={procname:"basic2d.*",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 122;
nimCopy(result_43645, vector2d_43048((a_43633.x * b_43635), (a_43633.y * b_43635)), NTI43023);
framePtr = F.prev;
return result_43645;
}
function slash__43664(a_43654, b_43656) {

var result_43666 = {x: 0.0, y: 0.0};
var F={procname:"basic2d./",prev:framePtr,filename:"lib/pure/basic2d.nim",line:0};
framePtr = F;
F.line = 122;
nimCopy(result_43666, vector2d_43048((a_43654.x / b_43656), (a_43654.y / b_43656)), NTI43023);
framePtr = F.prev;
return result_43666;
}
function drawHexGrid_58315(game_58317) {

var F={procname:"html5_game.drawHexGrid",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
L1: do {
F.line = 121;
var coords_58318 = {x: 0, y: 0};
F.line = 128;
var colontmp__58417 = null;
F.line = 121;
colontmp__58417 = game_58317.grid;
L2: do {
F.line = 129;
var i_58422 = 0;
L3: do {
F.line = 125;
var i_58424 = 0;
F.line = 3714;
var colontmp__58426 = 0;
F.line = 125;
colontmp__58426 = nTiles_56247(colontmp__58417);
F.line = 3715;
var i_58428 = 0;
L4: do {
F.line = 3716;
L5: while (true) {
if (!(i_58428 < colontmp__58426)) break L5;
F.line = 3717;
i_58424 = i_58428;
F.line = 126;
i_58422 = i_58424;
F.line = 130;
coords_58318 = ind2Coords_56251(colontmp__58417, i_58422);
L6: do {
F.line = 123;
var ind_58319 = coords2Ind_56256(game_58317.grid, coords_58318);
F.line = 124;
var currentCenter_58320 = coords2ScreenPos_58283(game_58317, coords_58318);
F.line = 125;
var color_58321 = tileStates2Colors_58217[chckIndx(getStateAt_56578(game_58317.grid, ind_58319), 0, tileStates2Colors_58217.length)-0];
F.line = 126;
var effect_58322 = getEffectAt_56730(game_58317.grid, ind_58319);
if (isEmptyAt_56618(game_58317.grid, ind_58319)) {
F.line = 128;
break L6;
}

fillStyleeq__46289(game_58317.renderer, rgb_46207(0));
drawNGon_58209(game_58317.renderer, plus__43598(currentCenter_58320, vector2d_43048(2.0000000000000000e+00, 2.0000000000000000e+00)), game_58317.hexRadius, 6, 3.0000000000000000e+01);
fillStyleeq__46289(game_58317.renderer, color_58321);
drawNGon_58209(game_58317.renderer, currentCenter_58320, game_58317.hexRadius, 6, 3.0000000000000000e+01);
if (isObj(effect_58322.m_type, NTI56028)) {
L7: do {
F.line = 134;
var sign_58402 = 0.0;
F.line = 3523;
var i_58414 = 0;
F.line = 3524;
var L_58416 = 2;
L8: do {
F.line = 3525;
L9: while (true) {
if (!(i_58414 < L_58416)) break L9;
F.line = 3526;
sign_58402 = [-1.0000000000000000e+00, 1.0000000000000000e+00][chckIndx(i_58414, 0, [-1.0000000000000000e+00, 1.0000000000000000e+00].length)-0];
F.line = 136;
var vec_58403 = star__43643(directions2Vectors_56359[chckIndx(effect_58322.direction, 0, directions2Vectors_56359.length)-0], sign_58402);
F.line = 137;
var cen_58404 = plus__43598(currentCenter_58320, slash__43664(star__43643(vec_58403, game_58317.hexRadius), 3.0000000000000000e+00));
fillStyleeq__46289(game_58317.renderer, rgb_46207(0));
drawNGon_58209(game_58317.renderer, cen_58404, (game_58317.hexRadius / 8.0000000000000000e+00), 30, 0.0);
i_58414 = addInt(i_58414, 1);
if (!((2 == L_58416))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
}

} while(false);
i_58428 = addInt(i_58428, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function renderText_58001(ctx_58003, text_58004, x_58005, y_58006) {

var F={procname:"html5_game.renderText",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
ctx_58003.fillText(toJSStr(text_58004), x_58005, y_58006);
framePtr = F.prev;
}
function render_58429(game_58431) {

var F={procname:"html5_game.render",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
fillStyleeq__46289(game_58431.renderer, rgb_46201(110, 132, 174));
game_58431.renderer.fillRect(0.0, 0.0, 1.2800000000000000e+03, 7.2000000000000000e+02);
drawHexGrid_58315(game_58431);
F.line = 151;
game_58431.renderer.font = "16px Serif";
fillStyleeq__46289(game_58431.renderer, rgb_46207(0));
renderText_58001(game_58431.renderer, (makeNimstrLit("Moves: ").slice(0,-1)).concat(cstrToNimstr((game_58431.nMoves)+"")), 1.1800000000000000e+03, 6.0000000000000000e+01);
if (game_58431.isWin) {
F.line = 155;
game_58431.renderer.font = "48px Serif";
fillStyleeq__46289(game_58431.renderer, rgb_46207(16777215));
renderText_58001(game_58431.renderer, makeNimstrLit("Won!"), 1.1800000000000000e+03, 9.0000000000000000e+01);
}

framePtr = F.prev;
}
function loop_58610() {

var F={procname:"html5_game.loop",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
logic_58450(game_58513[0]);
render_58429(game_58513[0]);
requestAnimationFrame(loop_58610);
framePtr = F.prev;
}
function main_58612() {

var F={procname:"html5_game.main",prev:framePtr,filename:"hexcapepkg/html5_game.nim",line:0};
framePtr = F;
loop_58610();
framePtr = F.prev;
}
main_58612();
function setStateAt_56598(grid_56600, ind_56601, newState_56602) {

var F={procname:"logic.setStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 210;
grid_56600.tileStates[chckIndx(ind_56601, 0, grid_56600.tileStates.length)-0] = newState_56602;
framePtr = F.prev;
}
function X5BX5Deq__56608(grid_56610, ind_56611, newState_56612) {

var F={procname:"logic.[]=",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
setStateAt_56598(grid_56610, ind_56611, newState_56612);
framePtr = F.prev;
}
function flipStateAt_56680(grid_56682, ind_56683) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
X5BX5Deq__56608(grid_56682, ind_56683, tileStates2Opposite_56668[chckIndx(X5BX5D__56588(grid_56682, ind_56683), 0, tileStates2Opposite_56668.length)-0]);
framePtr = F.prev;
}
function flipStateAt_56684(grid_56686, coords_56687) {

var F={procname:"logic.flipStateAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipStateAt_56680(grid_56686, coords2Ind_56256(grid_56686, coords_56687));
framePtr = F.prev;
}
function plus__56393(p1_56395, p2_56396) {

var result_56397 = {x: 0, y: 0};
var F={procname:"logic.+",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 179;
nimCopy(result_56397, newCoords_56242(addInt(p1_56395.x, p2_56396.x), addInt(p1_56395.y, p2_56396.y)), NTI56014);
framePtr = F.prev;
return result_56397;
}
function inside_56298(grid_56300, coords_56301) {

var Tmp1;
var Tmp2;
var Tmp3;
var result_56302 = false;
var F={procname:"logic.inside",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 134;
if (!(0 <= coords_56301.x)) Tmp3 = false; else {Tmp3 = (0 <= coords_56301.y); }if (!Tmp3) Tmp2 = false; else {Tmp2 = (coords_56301.x < grid_56300.width); }if (!Tmp2) Tmp1 = false; else {Tmp1 = (coords_56301.y < grid_56300.width); }result_56302 = Tmp1;
framePtr = F.prev;
return result_56302;
}
function isEmptyAt_56633(grid_56635, coords_56636) {

var result_56637 = false;
var F={procname:"logic.isEmptyAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 217;
result_56637 = isEmptyAt_56618(grid_56635, coords2Ind_56256(grid_56635, coords_56636));
framePtr = F.prev;
return result_56637;
}
function isVoidAt_56663(grid_56665, coords_56666) {

var result_56667 = false;
var F={procname:"logic.isVoidAt",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
F.line = 223;
result_56667 = (!(inside_56298(grid_56665, coords_56666)) || isEmptyAt_56633(grid_56665, coords_56666));
framePtr = F.prev;
return result_56667;
}
function affect_56745(e_56747, grid_56748, coords_56749) {

var Tmp4;
var F={procname:"logic.affect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipStateAt_56684(grid_56748, coords_56749);
L1: do {
F.line = 245;
var opposite_56802 = false;
F.line = 3523;
var i_56810 = 0;
F.line = 3524;
var L_56812 = 2;
L2: do {
F.line = 3525;
L3: while (true) {
if (!(i_56810 < L_56812)) break L3;
F.line = 3526;
opposite_56802 = [false, true][chckIndx(i_56810, 0, [false, true].length)-0];
F.line = 247;
if (opposite_56802) {
Tmp4 = directions2Opposites_56341[chckIndx(e_56747.direction, 0, directions2Opposites_56341.length)-0];
}
else {
Tmp4 = e_56747.direction;
}

var dir_56803 = Tmp4;
F.line = 248;
var offset_56804 = nimCopy(null, directions2CoordsOffsets_56381[chckIndx(dir_56803, 0, directions2CoordsOffsets_56381.length)-0], NTI56014);
F.line = 249;
var next_56805 = plus__56393(coords_56749, offset_56804);
L5: do {
F.line = 252;
L6: while (true) {
if (!!(isVoidAt_56663(grid_56748, next_56805))) break L6;
flipStateAt_56684(grid_56748, next_56805);
F.line = 254;
nimCopy(next_56805, plus__56393(next_56805, offset_56804), NTI56014);
}
} while(false);
i_56810 = addInt(i_56810, 1);
if (!((2 == L_56812))) {
failedAssertImpl_21439(makeNimstrLit("len(a) == L seq modified while iterating over it"));
}

}
} while(false);
} while(false);
framePtr = F.prev;
}
function dotdot__38470(a_38474, b_38476) {

var result_38478 = {a: 0, b: 0};
var F={procname:".....",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
F.line = 274;
result_38478.a = a_38474;
F.line = 275;
result_38478.b = b_38476;
framePtr = F.prev;
return result_38478;
}
function flipWithNeighbors_56688(grid_56690, ind_56691) {

var F={procname:"logic.flipWithNeighbors",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
L1: do {
F.line = 235;
var neighbor_56692 = {x: 0, y: 0};
F.line = 200;
var coords_56700 = ind2Coords_56251(grid_56690, ind_56691);
L2: do {
F.line = 201;
var neighbor_56702 = {x: 0, y: 0};
F.line = 195;
neighbor_56702 = coords_56700;
F.line = 202;
neighbor_56692 = neighbor_56702;
flipStateAt_56684(grid_56690, neighbor_56692);
L3: do {
F.line = 196;
var neighbor_56704 = {x: 0, y: 0};
L4: do {
F.line = 86;
var i_56706 = 0;
F.line = 2074;
var colontmp__56708 = {a: 0, b: 0};
F.line = 86;
colontmp__56708 = dotdot__38470(0, 5);
L5: do {
F.line = 2077;
var x_56710 = 0;
F.line = 1943;
var colontmp__56712 = 0;
F.line = 1943;
var colontmp__56714 = 0;
F.line = 2077;
colontmp__56712 = colontmp__56708.a;
F.line = 2077;
colontmp__56714 = colontmp__56708.b;
F.line = 1925;
var res_56716 = colontmp__56712;
L6: do {
F.line = 1926;
L7: while (true) {
if (!(res_56716 <= colontmp__56714)) break L7;
F.line = 1927;
x_56710 = res_56716;
F.line = 2078;
i_56706 = x_56710;
F.line = 87;
var dir_56721 = chckRange(i_56706, 0, 5);
F.line = 184;
var offset_56723 = nimCopy(null, directions2CoordsOffsets_56381[chckIndx(dir_56721, 0, directions2CoordsOffsets_56381.length)-0], NTI56014);
F.line = 185;
var neighCand_56725 = plus__56393(coords_56700, offset_56723);
if (inside_56298(grid_56690, neighCand_56725)) {
F.line = 187;
neighbor_56704 = neighCand_56725;
F.line = 197;
neighbor_56702 = neighbor_56704;
F.line = 202;
neighbor_56692 = neighbor_56702;
flipStateAt_56684(grid_56690, neighbor_56692);
}

res_56716 = addInt(res_56716, 1);
}
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
} while(false);
framePtr = F.prev;
}
function flipWithNeighbors_56726(grid_56728, coords_56729) {

var F={procname:"logic.flipWithNeighbors",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipWithNeighbors_56688(grid_56728, coords2Ind_56256(grid_56728, coords_56729));
framePtr = F.prev;
}
function affect_56740(e_56742, grid_56743, coords_56744) {

var F={procname:"logic.affect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
flipWithNeighbors_56726(grid_56743, coords_56744);
framePtr = F.prev;
}
function quit_20406(errormsg_20408, errorcode_20409) {

var F={procname:"system.quit",prev:framePtr,filename:"lib/system.nim",line:0};
framePtr = F;
rawEcho(errormsg_20408);
exit(errorcode_20409);
framePtr = F.prev;
}
function affect_56060(e_56062, grid_56063, coords_56064) {

var F={procname:"logic.affect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
quit_20406(makeNimstrLit("to override!"), 1);
framePtr = F.prev;
}
function affect_56066(e_56062, grid_56063, coords_56064) {

var F={procname:"logic.affect",prev:framePtr,filename:"hexcapepkg/logic.nim",line:0};
framePtr = F;
if (isObj(e_56062.m_type, NTI56028)) {
affect_56745(e_56062, grid_56063, coords_56064);
}
else {
if (isObj(e_56062.m_type, NTI56026)) {
affect_56740(e_56062, grid_56063, coords_56064);
}
else {
if (isObj(e_56062.m_type, NTI56024)) {
affect_56060(e_56062, grid_56063, coords_56064);
}
}}
framePtr = F.prev;
}
</script>
</body>

</html>